/* Base styles */
.quote-form-container {
  width: 100%;
  max-width: 800px;
  background: var(--surface);
  border-radius: var(--radius-2xl);
  box-shadow: var(--shadow-large);
  padding: var(--space-6);
  margin: 0 auto;
  overflow: visible;
  transition: all var(--duration-normal) var(--ease-out-cubic);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  position: relative;
  z-index: 1;
  border: 1px solid var(--border-light);
}

.quote-form-container::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    135deg,
    rgba(214, 223, 32, 0.2),
    rgba(255, 255, 255, 0.1),
    rgba(0, 28, 56, 0.05)
  );
  border-radius: inherit;
  z-index: -1;
  transition: opacity 0.3s ease;
  opacity: 0;
}

.quote-form-container:hover::before {
  opacity: 1;
}

.glassmorphism {
  background: var(--surface);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border: 1px solid var(--border-light);
  box-shadow: var(--shadow-soft);
  transition: all var(--duration-normal) var(--ease-out-cubic);
  outline: none;
}

.glassmorphism:hover {
  background: var(--surface-hover);
  border-color: var(--border-medium);
  box-shadow: var(--shadow-medium);
  transform: translateY(-1px);
}

.glassmorphism:focus {
  background: var(--surface-hover);
  border-color: var(--accent);
  box-shadow: 
    var(--shadow-medium),
    0 0 0 3px rgba(214, 223, 32, 0.15);
  transform: translateY(-1px);
}

.glassmorphism:active {
  background: var(--surface-active);
  border-color: var(--accent-dark);
  transform: translateY(0);
  transition-duration: var(--duration-fast);
}

@media (min-width: 640px) {
  .quote-form-container {
    padding: var(--space-8);
  }
}

@media (min-width: 768px) {
  .quote-form-container {
    padding: var(--space-10);
  }
}

/* Form header */
.form-header {
  text-align: center;
  margin-bottom: var(--space-8);
  position: relative;
}

.form-title {
  font-size: clamp(1.75rem, 4vw, 2.25rem);
  font-weight: 800;
  margin-bottom: var(--space-3);
  background-size: 200% auto;
  animation: gradient 8s linear infinite;
  letter-spacing: -0.02em;
  line-height: var(--line-height-tight);
  text-shadow: 0 2px 4px rgba(0, 28, 56, 0.1);
}

.form-subtitle {
  font-size: clamp(1rem, 2.5vw, 1.125rem);
  font-weight: 500;
  color: var(--gray-600);
  line-height: var(--line-height-relaxed);
  max-width: 600px;
  margin: 0 auto;
}

@keyframes gradient {
  0% { background-position: 0% center; }
  50% { background-position: 100% center; }
  100% { background-position: 0% center; }
}

/* Form layout */
.quote-form {
  margin-top: var(--space-6);
}

.form-step {
  animation: fadeIn 0.4s ease-in-out;
  position: relative;
  z-index: 1;
}

.step-header {
  margin-bottom: var(--space-6);
}

.step-header h2 {
  font-size: clamp(1.125rem, 3vw, 1.375rem);
  font-weight: 700;
  display: flex;
  align-items: center;
  color: var(--primary);
  line-height: var(--line-height-tight);
  margin-bottom: var(--space-4);
  letter-spacing: -0.01em;
}

.step-number {
  color: var(--accent);
  margin-right: var(--space-2);
  font-weight: 800;
  text-shadow: 0 1px 2px rgba(214, 223, 32, 0.3);
}

.step-emoji {
  margin-left: var(--space-2);
  font-size: clamp(1.25rem, 3vw, 1.5rem);
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
}

/* Form controls */
.form-control {
  position: relative;
  margin-bottom: var(--space-4);
}

.input {
  width: 100%;
  padding: var(--space-4) var(--space-5);
  border-radius: var(--radius-xl);
  font-size: 1rem;
  font-weight: 500;
  transition: all var(--duration-normal) var(--ease-out-cubic);
  outline: none;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans CJK SC', 'Noto Sans CJK TC', 'Noto Sans CJK JP', 'Noto Sans CJK KR', 'Noto Sans Arabic', 'Noto Sans Hebrew', 'Noto Sans Thai', 'Noto Sans Devanagari', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  line-height: var(--line-height-normal);
  min-height: 48px; /* Better touch targets */
  appearance: none;
  -webkit-appearance: none;
  /* Support for international input */
  unicode-bidi: embed;
  text-rendering: optimizeLegibility;
  -webkit-font-feature-settings: "kern" 1;
  font-feature-settings: "kern" 1;
  /* Ensure proper text direction handling */
  direction: ltr;
}

.input::placeholder {
  color: var(--gray-400);
  transition: color var(--duration-normal) var(--ease-gentle);
  /* Support for international placeholders */
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans CJK SC', 'Noto Sans CJK TC', 'Noto Sans CJK JP', 'Noto Sans CJK KR', 'Noto Sans Arabic', 'Noto Sans Hebrew', 'Noto Sans Thai', 'Noto Sans Devanagari', sans-serif;
}

.input:focus::placeholder {
  color: var(--gray-300);
  transform: translateY(-1px);
}

.input:focus {
  border-color: var(--accent);
  box-shadow: 
    var(--shadow-soft),
    0 0 0 3px rgba(214, 223, 32, 0.15);
  transform: translateY(-1px);
}

.input:hover:not(:focus) {
  border-color: var(--border-strong);
  transform: translateY(-0.5px);
}

.input-error {
  border-color: var(--error);
  background: rgba(239, 68, 68, 0.02);
}

.input-error:focus {
  box-shadow: 
    var(--shadow-soft),
    0 0 0 3px rgba(239, 68, 68, 0.15);
  transform: translateY(-1px);
}

.input-error::placeholder {
  color: rgba(239, 68, 68, 0.5);
}

.check-icon {
  position: absolute;
  right: var(--space-4);
  top: 50%;
  transform: translateY(-50%);
  color: var(--success);
  filter: drop-shadow(0 1px 2px rgba(16, 185, 129, 0.2));
}

.input-wrapper {
  position: relative;
}

/* Search inputs */
.search-input-wrapper {
  position: relative;
  transition: all 0.3s ease;
}

.search-input-wrapper:focus-within {
  transform: translateY(-1px);
}

.search-icon {
  position: absolute;
  left: var(--space-4);
  top: 50%;
  transform: translateY(-50%);
  color: var(--gray-400);
  pointer-events: none;
  z-index: 2;
  transition: color 0.3s ease;
}

.search-input-wrapper:focus-within .search-icon {
  color: var(--accent);
}

.search-input {
  padding-left: var(--space-10);
  background: rgba(255, 255, 255, 0.8);
  border: 1px solid rgba(255, 255, 255, 0.3);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
}

.search-input:focus {
  background: rgba(255, 255, 255, 0.95);
  transform: translateY(-1px);
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.1);
}

/* Country selector */
.country-select {
  position: relative;
  z-index: 100;
}

.country-list {
  position: absolute;
  top: calc(100% + var(--space-2));
  left: 0;
  right: 0;
  background: rgba(255, 255, 255, 0.98);
  border-radius: var(--radius-xl);
  box-shadow: 
    0 4px 20px rgba(0, 0, 0, 0.1),
    0 0 0 1px rgba(255, 255, 255, 0.5);
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  transform: translateY(-10px);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  z-index: 1000;
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  
  /* Contraintes pour ne pas sortir du viewport */
  max-width: 100vw;
  min-width: 200px;
  
  /* Calcul dynamique de la hauteur maximale */
  --available-space-bottom: calc(100vh - var(--dropdown-top, 0px) - 20px);
  --available-space-top: calc(var(--dropdown-top, 0px) - 20px);
  --dropdown-max-height: min(300px, var(--available-space-bottom));
}

/* Variante pour afficher le dropdown au-dessus quand il n'y a pas assez d'espace en bas */
.country-list.show-above {
  top: auto;
  bottom: calc(100% + var(--space-2));
  transform: translateY(10px);
  --dropdown-max-height: min(300px, var(--available-space-top));
}

.country-list.show-above.show {
  transform: translateY(0);
}

.country-list.show {
  max-height: var(--dropdown-max-height);
  opacity: 1;
  transform: translateY(0);
  overflow-y: auto;
  
  /* Scroll personnalisé pour éviter les débordements */
  scrollbar-width: thin;
  scrollbar-color: var(--gray-300) transparent;
}

.country-list::-webkit-scrollbar {
  width: 8px;
}

.country-list::-webkit-scrollbar-track {
  background: transparent;
}

.country-list::-webkit-scrollbar-thumb {
  background: var(--gray-200);
  border-radius: 4px;
}

.country-list::-webkit-scrollbar-thumb:hover {
  background: var(--gray-300);
}

.country-option {
  display: flex;
  align-items: center;
  padding: var(--space-3) var(--space-4);
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
  overflow: hidden;
}

.country-option::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, var(--accent), transparent);
  opacity: 0;
  transition: opacity 0.2s ease;
}

.country-option:hover {
  background: rgba(214, 223, 32, 0.1);
}

.country-option:hover::before {
  opacity: 0.1;
}

.country-option.selected {
  background: rgba(214, 223, 32, 0.15);
}

.country-option.selected::before {
  opacity: 0.2;
}

.country-flag {
  margin-right: var(--space-3);
  font-size: 1.5em;
  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1));
  transition: transform 0.2s ease;
}

.country-option:hover .country-flag {
  transform: scale(1.1);
}

.country-name {
  flex: 1;
  font-weight: 500;
  color: var(--primary);
  transition: transform 0.2s ease;
}

.country-option:hover .country-name {
  transform: translateX(var(--space-1));
}

.country-code {
  color: var(--gray-500);
  font-size: 0.875em;
  margin-left: var(--space-2);
  font-family: monospace;
  opacity: 0.7;
  transition: opacity 0.2s ease;
}

.country-option:hover .country-code {
  opacity: 1;
}

/* Port selector */
.port-select {
  position: relative;
  z-index: 100;
}

.port-list {
  position: absolute;
  top: calc(100% + var(--space-2));
  left: 0;
  right: 0;
  background: rgba(255, 255, 255, 0.98);
  border-radius: var(--radius-xl);
  box-shadow: 
    0 4px 20px rgba(0, 0, 0, 0.1),
    0 0 0 1px rgba(255, 255, 255, 0.5);
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  transform: translateY(-10px);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  z-index: 1000;
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  
  /* Contraintes pour ne pas sortir du viewport */
  max-width: 100vw;
  min-width: 200px;
  
  /* Calcul dynamique de la hauteur maximale */
  --available-space-bottom: calc(100vh - var(--dropdown-top, 0px) - 20px);
  --available-space-top: calc(var(--dropdown-top, 0px) - 20px);
  --dropdown-max-height: min(300px, var(--available-space-bottom));
}

/* Variante pour afficher le dropdown au-dessus quand il n'y a pas assez d'espace en bas */
.port-list.show-above {
  top: auto;
  bottom: calc(100% + var(--space-2));
  transform: translateY(10px);
  --dropdown-max-height: min(300px, var(--available-space-top));
}

.port-list.show-above.show {
  transform: translateY(0);
}

.port-list.show {
  max-height: var(--dropdown-max-height);
  opacity: 1;
  transform: translateY(0);
  overflow-y: auto;
  
  /* Scroll personnalisé pour éviter les débordements */
  scrollbar-width: thin;
  scrollbar-color: var(--gray-300) transparent;
}

/* Assurer que le dropdown reste dans les limites horizontales */
.port-select,
.currency-select,
.timing-select,
.requirements-select {
  position: relative;
  overflow: visible;
}

/* Ajustement automatique si le dropdown dépasse à droite */
.port-list.adjust-right {
  left: auto;
  right: 0;
}

/* Ajustement automatique si le dropdown dépasse à gauche */
.port-list.adjust-left {
  left: 0;
  right: auto;
}

/* Largeur responsable sur mobile */
@media (max-width: 640px) {
  .port-list {
    left: -10px;
    right: -10px;
    max-width: calc(100vw - 20px);
    min-width: auto;
    --dropdown-max-height: min(250px, var(--available-space-bottom));
  }
  
  .port-list.show-above {
    --dropdown-max-height: min(250px, var(--available-space-top));
  }
}

/* Styles pour les conteneurs parents pour éviter le débordement */
.form-step {
  overflow: visible;
}

.form-control {
  overflow: visible;
}

.quote-form-container {
  overflow: visible;
}

.glassmorphism {
  overflow: visible;
}

/* Classe utilitaire pour forcer le dropdown à rester visible */
.dropdown-container {
  position: relative;
  overflow: visible;
  z-index: 1000;
}

/* Animation améliorée pour le repositionnement */
.port-list.repositioning {
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.port-list::-webkit-scrollbar {
  width: 8px;
}

.port-list::-webkit-scrollbar-track {
  background: transparent;
}

.port-list::-webkit-scrollbar-thumb {
  background: var(--gray-200);
  border-radius: 4px;
}

.port-list::-webkit-scrollbar-thumb:hover {
  background: var(--gray-300);
}

.port-option {
  display: flex;
  align-items: center;
  padding: var(--space-3) var(--space-4);
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
  overflow: hidden;
}

.port-option::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, #3B82F6, transparent);
  opacity: 0;
  transition: opacity 0.2s ease;
}

.port-option:hover {
  background: rgba(59, 130, 246, 0.1);
}

.port-option:hover::before {
  opacity: 0.1;
}

.port-option.selected {
  background: rgba(59, 130, 246, 0.15);
}

.port-option.selected::before {
  opacity: 0.2;
}

.port-icon {
  margin-right: var(--space-3);
  font-size: 1.4em;
  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1));
  transition: transform 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 1.8em;
  height: 1.8em;
  line-height: 1;
  text-align: center;
  vertical-align: middle;
  min-width: 1.8em;
  flex-shrink: 0;
}

.port-option:hover .port-icon {
  transform: scale(1.05);
}

.port-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  transition: transform 0.2s ease;
}

.port-name {
  font-weight: 500;
  color: var(--primary);
}

.port-region {
  font-size: 0.75em;
  color: var(--gray-500);
  margin-top: 2px;
}

.port-option:hover .port-info {
  transform: translateX(var(--space-1));
}

.port-code {
  color: var(--gray-500);
  font-size: 0.875em;
  margin-left: var(--space-2);
  font-family: monospace;
  opacity: 0.7;
  transition: opacity 0.2s ease;
}

.port-option:hover .port-code {
  opacity: 1;
}

/* Modal */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 28, 56, 0.5);
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  animation: fadeIn 0.3s ease;
}

.modal-content {
  background: rgba(255, 255, 255, 0.98);
  border-radius: var(--radius-2xl);
  padding: var(--space-6);
  width: 90%;
  max-width: 500px;
  position: relative;
  animation: slideIn 0.3s ease;
  box-shadow: 
    0 20px 40px rgba(0, 0, 0, 0.2),
    0 0 0 1px rgba(255, 255, 255, 0.5);
}

.modal-title {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--primary);
  margin-bottom: var(--space-2);
}

.modal-subtitle {
  color: var(--gray-600);
  margin-bottom: var(--space-6);
}

.modal-close {
  position: absolute;
  top: var(--space-4);
  right: var(--space-4);
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: rgba(0, 0, 0, 0.1);
  border: none;
  color: var(--gray-600);
  font-size: 1.5rem;
  line-height: 1;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.modal-close:hover {
  background: rgba(0, 0, 0, 0.2);
  color: var(--gray-800);
  transform: scale(1.1);
}

/* City list */
.city-search {
  position: relative;
  margin-bottom: var(--space-4);
  z-index: 100;
}

.city-list {
  position: absolute;
  top: calc(100% + var(--space-2));
  left: 0;
  right: 0;
  background: rgba(255, 255, 255, 0.98);
  border-radius: var(--radius-xl);
  box-shadow: 
    0 4px 20px rgba(0, 0, 0, 0.1),
    0 0 0 1px rgba(255, 255, 255, 0.5);
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  transform: translateY(-10px);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  z-index: 1000;
}

.city-list.show {
  max-height: 200px;
  opacity: 1;
  transform: translateY(0);
  overflow-y: auto;
}

.city-option {
  padding: var(--space-3) var(--space-4);
  cursor: pointer;
  transition: all 0.2s ease;
  border-bottom: 1px solid var(--gray-100);
}

.city-option:last-child {
  border-bottom: none;
}

.city-option:hover {
  background: rgba(59, 130, 246, 0.1);
}

.city-info {
  display: flex;
  flex-direction: column;
}

.city-name {
  font-weight: 500;
  color: var(--primary);
}

.city-region {
  font-size: 0.75em;
  color: var(--gray-500);
  margin-top: 2px;
}

.no-results {
  padding: var(--space-4);
  text-align: center;
  color: var(--gray-500);
  font-style: italic;
}

/* Cargo metrics */
.cargo-metrics {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--space-4);
  margin-bottom: var(--space-4);
}

@media (min-width: 640px) {
  .cargo-metrics {
    grid-template-columns: 1fr 1fr;
  }
}

/* Help text */
.form-help-text {
  font-size: 0.875rem;
  color: var(--gray-500);
  margin-bottom: var(--space-4);
}

.text-link {
  color: var(--info);
  text-decoration: underline;
  cursor: pointer;
  transition: color 0.2s ease;
}

.text-link:hover {
  color: var(--accent);
}

/* Shipping modes */
.shipping-modes {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--space-3);
  margin-bottom: var(--space-4);
}

@media (min-width: 640px) {
  .shipping-modes {
    grid-template-columns: repeat(3, 1fr);
  }
}

.mode-option {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-5);
  border-radius: var(--radius-xl);
  cursor: pointer;
  transition: all var(--duration-normal) var(--ease-out-cubic);
  position: relative;
  overflow: hidden;
  border: 2px solid var(--border-light);
  transform-origin: center;
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  box-shadow: var(--shadow-soft);
  user-select: none;
}

.mode-option::before {
  content: '';
  position: absolute;
  inset: 0;
  background: inherit;
  transition: opacity 0.3s ease;
  opacity: 0;
  z-index: -1;
}

.mode-option:hover {
  transform: translateY(-3px) scale(1.02);
  box-shadow: var(--shadow-medium);
  border-color: var(--border-medium);
}

.mode-option.selected {
  transform: scale(1.05);
  box-shadow: var(--shadow-large);
  border-color: #6B7280 !important;
}

.mode-option:active {
  transform: translateY(-1px) scale(1.01);
  transition-duration: var(--duration-fast);
}

/* SEA FREIGHT - Bleu */
.mode-option[data-mode="Sea"] {
  background: linear-gradient(135deg, rgba(28, 100, 242, 0.08), rgba(255, 255, 255, 0.9)) !important;
  border-color: var(--border-light) !important;
}

.mode-option[data-mode="Sea"]:hover {
  background: linear-gradient(135deg, rgba(28, 100, 242, 0.12), rgba(255, 255, 255, 0.95)) !important;
  border-color: var(--border-medium) !important;
  box-shadow: 
    0 8px 24px rgba(28, 100, 242, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.4) !important;
}

.mode-option[data-mode="Sea"].selected {
  background: linear-gradient(135deg, rgba(28, 100, 242, 0.15), rgba(255, 255, 255, 0.95)) !important;
  border-color: #1C64F2 !important;
  box-shadow: 
    0 12px 28px rgba(28, 100, 242, 0.25),
    inset 0 1px 0 rgba(255, 255, 255, 0.4) !important;
}

.mode-option[data-mode="Sea"] svg {
  color: #1C64F2 !important;
  filter: drop-shadow(0 2px 4px rgba(28, 100, 242, 0.3)) !important;
}

/* RAIL FREIGHT - Vert */
.mode-option[data-mode="Rail"] {
  background: linear-gradient(135deg, rgba(34, 197, 94, 0.08), rgba(255, 255, 255, 0.9)) !important;
  border-color: var(--border-light) !important;
}

.mode-option[data-mode="Rail"]:hover {
  background: linear-gradient(135deg, rgba(34, 197, 94, 0.12), rgba(255, 255, 255, 0.95)) !important;
  border-color: var(--border-medium) !important;
  box-shadow: 
    0 8px 24px rgba(34, 197, 94, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.4) !important;
}

.mode-option[data-mode="Rail"].selected {
  background: linear-gradient(135deg, rgba(34, 197, 94, 0.15), rgba(255, 255, 255, 0.95)) !important;
  border-color: #22C55E !important;
  box-shadow: 
    0 12px 28px rgba(34, 197, 94, 0.25),
    inset 0 1px 0 rgba(255, 255, 255, 0.4) !important;
}

.mode-option[data-mode="Rail"] svg {
  color: #22C55E !important;
  filter: drop-shadow(0 2px 4px rgba(34, 197, 94, 0.3)) !important;
}

/* AIR FREIGHT - Indigo */
.mode-option[data-mode="Air"] {
  background: linear-gradient(135deg, rgba(79, 70, 229, 0.08), rgba(255, 255, 255, 0.9)) !important;
  border-color: var(--border-light) !important;
}

.mode-option[data-mode="Air"]:hover {
  background: linear-gradient(135deg, rgba(79, 70, 229, 0.12), rgba(255, 255, 255, 0.95)) !important;
  border-color: var(--border-medium) !important;
  box-shadow: 
    0 8px 24px rgba(79, 70, 229, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.4) !important;
}

.mode-option[data-mode="Air"].selected {
  background: linear-gradient(135deg, rgba(79, 70, 229, 0.15), rgba(255, 255, 255, 0.95)) !important;
  border-color: #4F46E5 !important;
  box-shadow: 
    0 12px 28px rgba(79, 70, 229, 0.25),
    inset 0 1px 0 rgba(255, 255, 255, 0.4) !important;
}

.mode-option[data-mode="Air"] svg {
  color: #4F46E5 !important;
  filter: drop-shadow(0 2px 4px rgba(79, 70, 229, 0.3)) !important;
}

/* EXPRESS - Rose */
.mode-option[data-mode="Express"] {
  background: linear-gradient(135deg, rgba(236, 72, 153, 0.08), rgba(255, 255, 255, 0.9)) !important;
  border-color: var(--border-light) !important;
}

.mode-option[data-mode="Express"]:hover {
  background: linear-gradient(135deg, rgba(236, 72, 153, 0.12), rgba(255, 255, 255, 0.95)) !important;
  border-color: var(--border-medium) !important;
  box-shadow: 
    0 8px 24px rgba(236, 72, 153, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.4) !important;
}

.mode-option[data-mode="Express"].selected {
  background: linear-gradient(135deg, rgba(236, 72, 153, 0.15), rgba(255, 255, 255, 0.95)) !important;
  border-color: #EC4899 !important;
  box-shadow: 
    0 12px 28px rgba(236, 72, 153, 0.25),
    inset 0 1px 0 rgba(255, 255, 255, 0.4) !important;
}

.mode-option[data-mode="Express"] svg {
  color: #EC4899 !important;
  filter: drop-shadow(0 2px 4px rgba(236, 72, 153, 0.3)) !important;
}

.mode-option svg {
  width: 32px;
  height: 32px;
  margin-bottom: var(--space-3);
  transition: all 0.3s ease;
}

.mode-option.selected svg {
  transform: scale(1.2);
}

.mode-option span {
  font-weight: 600;
  margin-bottom: var(--space-2);
  transition: all 0.3s ease;
}

.mode-option.selected span {
  transform: scale(1.1);
}

.mode-desc {
  font-size: var(--text-sm);
  color: var(--gray-600);
  margin: var(--space-1) 0 0;
  transition: all var(--duration-normal) ease;
  line-height: 1.4;
  flex-grow: 1;
}

.mode-option:hover .mode-desc,
.mode-option.selected .mode-desc {
  opacity: 1;
}

.location-desc {
  font-size: 0.875rem;
  color: var(--gray-600);
  text-align: center;
  opacity: 0.8;
  transition: opacity 0.3s ease;
}

.location-type-option:hover .location-desc,
.location-type-option.selected .location-desc {
  opacity: 1;
}

/* Form navigation */
.form-navigation {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  margin-top: var(--space-8);
  gap: var(--space-4);
}

.btn {
  padding: var(--space-3) var(--space-6);
  border-radius: var(--radius-xl);
  font-weight: 600;
  cursor: pointer;
  transition: all var(--duration-normal) var(--ease-out-cubic);
  border: none;
  outline: none;
  position: relative;
  overflow: hidden;
  font-family: inherit;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  text-decoration: none;
  user-select: none;
  transform-origin: center;
  min-height: 44px; /* Better touch targets */
}

.btn::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transform: translateX(-100%);
  transition: transform var(--duration-slow) var(--ease-out-cubic);
  z-index: 1;
}

.btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none !important;
}

.btn:disabled::before {
  display: none;
}

.btn-primary {
  background: linear-gradient(135deg, var(--accent), var(--accent-light));
  color: var(--primary);
  box-shadow: var(--shadow-soft);
  border: 1px solid var(--accent);
}

.btn-primary:hover:not(:disabled) {
  background: linear-gradient(135deg, var(--accent-light), var(--accent));
  transform: translateY(-2px) scale(1.02);
  box-shadow: var(--shadow-medium), var(--shadow-glow);
  border-color: var(--accent-light);
}

.btn-primary:active:not(:disabled) {
  transform: translateY(0) scale(0.98);
  transition-duration: var(--duration-fast);
}

.btn-primary:hover::before {
  transform: translateX(100%);
}

.btn-secondary {
  background: var(--surface);
  color: var(--primary);
  border: 1px solid var(--border-medium);
  box-shadow: var(--shadow-soft);
}

.btn-secondary:hover:not(:disabled) {
  background: var(--surface-hover);
  border-color: var(--border-strong);
  transform: translateY(-1px) scale(1.01);
  box-shadow: var(--shadow-medium);
}

.btn-secondary:active:not(:disabled) {
  background: var(--surface-active);
  transform: translateY(0) scale(0.99);
  transition-duration: var(--duration-fast);
}

.btn-submit {
  background: linear-gradient(135deg, var(--accent), var(--primary));
  color: white;
  padding: var(--space-3) var(--space-8);
  box-shadow: 0 4px 12px rgba(214, 223, 32, 0.2);
}

.btn-submit:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(214, 223, 32, 0.3);
  background: linear-gradient(135deg, var(--accent), var(--primary));
  color: white;
}

/* Trust badge */
.trust-badge {
  text-align: center;
  margin-top: var(--space-8);
  background: rgba(214, 223, 32, 0.1);
  padding: var(--space-4);
  border-radius: var(--radius-xl);
  font-weight: 600;
  font-size: 0.875rem;
  color: var(--primary);
  border: 1px solid rgba(214, 223, 32, 0.2);
  transition: all 0.3s ease;
}

.trust-badge:hover {
  background: rgba(214, 223, 32, 0.15);
  transform: translateY(-1px);
}

/* Responsive adjustments */
@media (max-width: 480px) {
  .trust-badge {
    font-size: 0.75rem;
    padding: var(--space-3);
  }
  
  .form-title {
    font-size: 1.5rem;
  }
  
  .form-subtitle {
    font-size: 0.875rem;
  }
  
  .step-header h2 {
    font-size: 1.125rem;
  }
  
  .btn {
    padding: var(--space-2) var(--space-4);
    font-size: 0.875rem;
  }
}

/* Location types */
.location-types {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--space-3);
  margin-bottom: var(--space-4);
}

@media (min-width: 640px) {
  .location-types {
    grid-template-columns: repeat(4, 1fr);
  }
}

.location-type-option {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-4);
  border-radius: var(--radius-xl);
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  background: rgba(255, 255, 255, 0.8);
  border: 2px solid transparent;
}

/* Factory/Warehouse */
.location-type-option[data-id="factory"] {
  background: linear-gradient(135deg, rgba(234, 88, 12, 0.08), rgba(255, 255, 255, 0.9));
}

.location-type-option[data-id="factory"]:hover {
  background: linear-gradient(135deg, rgba(234, 88, 12, 0.12), rgba(255, 255, 255, 0.95));
  box-shadow: 
    0 8px 24px rgba(234, 88, 12, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.4);
}

.location-type-option[data-id="factory"].selected {
  background: linear-gradient(135deg, rgba(234, 88, 12, 0.15), rgba(255, 255, 255, 0.95));
  border-color: #EA580C;
  transform: scale(1.05);
}

.location-type-option[data-id="factory"] svg {
  color: #EA580C;
  filter: drop-shadow(0 2px 4px rgba(234, 88, 12, 0.3));
}

/* Port/Airport */
.location-type-option[data-id="port"] {
  background: linear-gradient(135deg, rgba(2, 132, 199, 0.08), rgba(255, 255, 255, 0.9));
}

.location-type-option[data-id="port"]:hover {
  background: linear-gradient(135deg, rgba(2, 132, 199, 0.12), rgba(255, 255, 255, 0.95));
  box-shadow: 
    0 8px 24px rgba(2, 132, 199, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.4);
}

.location-type-option[data-id="port"].selected {
  background: linear-gradient(135deg, rgba(2, 132, 199, 0.15), rgba(255, 255, 255, 0.95));
  border-color: #0284C7;
  transform: scale(1.05);
}

.location-type-option[data-id="port"] svg {
  color: #0284C7;
  filter: drop-shadow(0 2px 4px rgba(2, 132, 199, 0.3));
}

/* Business address */
.location-type-option[data-id="business"] {
  background: linear-gradient(135deg, rgba(79, 70, 229, 0.08), rgba(255, 255, 255, 0.9));
}

.location-type-option[data-id="business"]:hover {
  background: linear-gradient(135deg, rgba(79, 70, 229, 0.12), rgba(255, 255, 255, 0.95));
  box-shadow: 
    0 8px 24px rgba(79, 70, 229, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.4);
}

.location-type-option[data-id="business"].selected {
  background: linear-gradient(135deg, rgba(79, 70, 229, 0.15), rgba(255, 255, 255, 0.95));
  border-color: #4F46E5;
  transform: scale(1.05);
}

.location-type-option[data-id="business"] svg {
  color: #4F46E5;
  filter: drop-shadow(0 2px 4px rgba(79, 70, 229, 0.3));
}

/* Residential address */
.location-type-option[data-id="residential"] {
  background: linear-gradient(135deg, rgba(16, 185, 129, 0.08), rgba(255, 255, 255, 0.9));
}

.location-type-option[data-id="residential"]:hover {
  background: linear-gradient(135deg, rgba(16, 185, 129, 0.12), rgba(255, 255, 255, 0.95));
  box-shadow: 
    0 8px 24px rgba(16, 185, 129, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.4);
}

.location-type-option[data-id="residential"].selected {
  background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(255, 255, 255, 0.95));
  border-color: #10B981;
  transform: scale(1.05);
}

.location-type-option[data-id="residential"] svg {
  color: #10B981;
  filter: drop-shadow(0 2px 4px rgba(16, 185, 129, 0.3));
}

.location-type-option:hover {
  transform: translateY(-2px) scale(1.02);
}

.location-type-option.selected {
  transform: scale(1.05);
}

.location-type-option svg {
  width: 32px;
  height: 32px;
  margin-bottom: var(--space-3);
  transition: all 0.3s ease;
}

.location-type-option.selected svg {
  transform: scale(1.1);
}

.location-type-option span {
  font-weight: 600;
  font-size: 0.875rem;
  text-align: center;
  transition: all 0.3s ease;
}

.location-type-option.selected span {
  transform: scale(1.05);
}

.address-form {
  margin-top: var(--space-6);
}

.address-details {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--space-4);
}

@media (min-width: 640px) {
  .address-details {
    grid-template-columns: 1fr 1fr;
  }
}

/* Security badge */
.security-badge {
  text-align: center;
  margin-top: var(--space-6);
  padding: var(--space-3);
  border-radius: var(--radius-lg);
  font-weight: 500;
  font-size: 0.875rem;
  color: var(--gray-700);
  display: flex;
  align-items: center;
  justify-content: center;
}

.security-badge:hover {
  background: rgba(255, 255, 255, 0.9);
}

.security-badge span {
  margin-left: var(--space-2);
}

/* Cargo Step Specific Styles */

.label-text {
  display: block;
  font-weight: 600;
  color: var(--primary);
  margin-bottom: var(--space-2);
  font-size: clamp(0.875rem, 2vw, 0.9rem);
  line-height: var(--line-height-normal);
  letter-spacing: 0.01em;
  transition: color var(--duration-normal) var(--ease-gentle);
}

.form-control:focus-within .label-text {
  color: var(--accent-dark);
}

.button-group {
  display: flex;
  border-radius: var(--radius-lg);
  overflow: hidden;
  /* border: 1px solid rgba(0, 28, 56, 0.1); */ /* Match input border */
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

.btn-tab {
  flex-grow: 1;
  padding: var(--space-3) var(--space-4);
  background-color: rgba(255, 255, 255, 0.7);
  color: var(--gray-700);
  border: none;
  cursor: pointer;
  transition: all 0.3s ease;
  font-weight: 500;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  font-size: 0.9rem;
}

.btn-tab:not(:last-child) {
  border-right: 1px solid rgba(0, 28, 56, 0.1);
}

.btn-tab:hover {
  background-color: rgba(255, 255, 255, 0.9);
  color: var(--primary);
}

.btn-tab.active {
  background-color: var(--primary); /* Use primary color for active tab */
  color: white;
  font-weight: 600;
  box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
}

.btn-tab.active:hover {
  background-color: var(--primary); /* Darken or keep primary */
}


.shipping-type-selector {
  margin-bottom: var(--space-6);
}

.package-type-selector {
   margin-bottom: var(--space-4);
}


.calculation-type-selector {
  display: flex;
  gap: var(--space-4);
  margin-bottom: var(--space-6);
  align-items: center;
}

.radio-group {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-3);
  align-items: center;
  margin-bottom: var(--space-4);
}

.radio-label {
  display: flex;
  align-items: center;
  padding: var(--space-3) var(--space-4);
  background-color: rgba(255, 255, 255, 0.7);
  border: 1px solid rgba(0, 28, 56, 0.1);
  border-radius: var(--radius-lg);
  cursor: pointer;
  transition: all 0.2s ease;
  font-weight: 500;
  color: var(--gray-700);
  font-size: 0.9rem;
}

.radio-label input[type="radio"] {
  margin-right: var(--space-2);
  accent-color: var(--accent); /* Or var(--primary) */
  transform: scale(1.2);
  transition: all 0.2s ease;
}

.radio-label:hover {
  background-color: rgba(255, 255, 255, 0.9);
  border-color: rgba(0, 28, 56, 0.2);
}

.radio-label input[type="radio"]:checked + span { /* Assuming text is wrapped in span, or style radio-label directly */
  color: var(--primary);
  font-weight: 600;
}

.radio-label:has(input[type="radio"]:checked) {
  background-color: rgba(214, 223, 32, 0.1); /* Light accent */
  border-color: var(--accent);
  color: var(--primary);
  font-weight: 600;
}


.input-number-wrapper {
  display: flex;
  align-items: center;
  border-radius: var(--radius-lg); /* Consistent rounded corners */
  overflow: hidden;
  background: rgba(255, 255, 255, 0.75); /* Glassmorphism base */
  /* border: 1px solid rgba(0, 28, 56, 0.15); */ /* Slightly more defined border */
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* Subtle inset shadow */
  width: auto; /* Allow to size based on content */
  min-width: 120px; /* Ensure it's not too small */
}

.input-number-wrapper input[type="number"].input.glassmorphism {
  -webkit-appearance: none;
  appearance: none;
  margin: 0;
  -moz-appearance: textfield;
  border: none;
  box-shadow: none;
  border-left: 1px solid rgba(0, 28, 56, 0.1);
  border-right: 1px solid rgba(0, 28, 56, 0.1);
  border-radius: 0; 
  padding-top: var(--space-2-5);
  padding-bottom: var(--space-2-5);
  height: auto; 
  line-height: 1.5;
  flex-grow: 0; 
  flex-shrink: 0; 
  width: 40px;  /* MODIFIED: Set width to match button width for balance */
  text-align: center !important; /* MODIFIED: Ensure centering, added !important for emphasis */
  box-sizing: border-box; /* MODIFIED: Explicitly set box-sizing */
}

.input-number-wrapper input[type="number"]::-webkit-outer-spin-button,
.input-number-wrapper input[type="number"]::-webkit-inner-spin-button {
  -webkit-appearance: none; /* Remove spinners in Chrome, Safari, Edge */
  margin: 0;
}

.btn-number-control {
  background-color: rgba(255, 255, 255, 0.6);
  border: none;
  padding: var(--space-2-5) 0; /* MODIFIED: Adjusted padding, horizontal padding now from width */
  width: 40px; /* MODIFIED: Explicit width for the button */
  cursor: pointer;
  color: var(--primary);
  transition: background-color 0.2s ease, color 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0; 
}

.btn-number-control:hover {
  background-color: rgba(var(--primary-rgb, 0, 28, 56), 0.08);
  color: var(--primary-dark);
}

.btn-number-control:active {
  background-color: rgba(var(--primary-rgb, 0, 28, 56), 0.12);
}

.btn-number-control svg {
  display: block; /* Helps with alignment */
}

.dimensions-group, .weight-group, .total-shipment-details .form-control {
  margin-bottom: var(--space-4); /* Consistent spacing */
}

.dimensions-group .flex, .weight-group .flex, .total-shipment-details .flex {
  gap: var(--space-2); /* Spacing between inputs in a row */
}

/* Override specific sizing for Step 4 inputs to maintain Step 1 consistency */
.step-4-container .input.glassmorphism {
  min-width: 120px; /* Larger minimum for better readability */
  /* Ensure all Step 4 inputs use identical Step 1 styling */
  padding: var(--space-4) var(--space-5);
  border-radius: var(--radius-xl);
  font-size: 1rem;
  font-weight: 500;
}

.step-4-container select.input.glassmorphism {
  min-width: 140px; /* Larger minimum for select dropdowns */
  text-align: left; /* Reset text alignment for better UX in dropdowns */
  cursor: pointer;
}


.info-banner {
  display: flex;
  align-items: flex-start; /* Align icon to top if text wraps */
  padding: var(--space-3) var(--space-4);
  border-radius: var(--radius-lg);
  background-color: rgba(59, 130, 246, 0.08); /* Light blue background */
  border: 1px solid rgba(59, 130, 246, 0.2);
  color: var(--gray-700); /* Darker text for readability */
  font-size: 0.875rem;
  line-height: 1.6;
  margin-bottom: var(--space-6);
}

.info-banner svg {
  flex-shrink: 0; /* Prevent icon from shrinking */
  margin-right: var(--space-3);
  margin-top: 2px; /* Fine-tune vertical alignment */
  color: #3B82F6; /* Blue icon color */
}

.container-details .button-group {
  flex-grow: 1; /* Allow button group to take available space */
}

.checkbox-label {
  display: flex;
  align-items: center;
  padding: var(--space-3) var(--space-4);
  background-color: rgba(255, 255, 255, 0.7);
  border: 1px solid rgba(0, 28, 56, 0.1);
  border-radius: var(--radius-lg);
  cursor: pointer;
  transition: all 0.2s ease;
  font-weight: 500;
  color: var(--gray-700);
  font-size: 0.9rem;
}

.checkbox-label:hover {
  background-color: rgba(255, 255, 255, 0.9);
  border-color: rgba(0, 28, 56, 0.2);
}

.checkbox-label input[type="checkbox"] {
  margin-right: var(--space-2);
  accent-color: var(--accent);
  transform: scale(1.2);
  border-radius: var(--radius-sm); /* Optional: style checkbox itself */
}

.checkbox-label:has(input[type="checkbox"]:checked) {
  background-color: rgba(214, 223, 32, 0.1);
  border-color: var(--accent);
  color: var(--primary);
  font-weight: 600;
}

.btn-secondary-outline {
  background-color: transparent;
  color: var(--primary);
  border: 2px solid var(--primary);
  padding: var(--space-3) var(--space-6);
  border-radius: var(--radius-xl);
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%; /* Make it full width as per design */
}

.btn-secondary-outline:hover {
  background-color: rgba(0, 28, 56, 0.05); /* Subtle hover for primary color */
  color: var(--primary); /* Ensure text color remains */
  border-color: var(--primary); /* Ensure border color remains */
  transform: translateY(-1px);
}

.btn-secondary-outline svg {
  margin-right: var(--space-2);
}

/* Responsive adjustments for cargo section */
@media (max-width: 640px) {
  .button-group {
    flex-direction: column; /* Stack buttons on smaller screens */
  }
  .btn-tab:not(:last-child) {
    border-right: none;
    border-bottom: 1px solid rgba(0, 28, 56, 0.1);
  }
  .calculation-type-selector {
    flex-direction: column;
    align-items: stretch; /* Make radio labels full width */
  }
  .radio-label {
    width: 100%;
    justify-content: center;
  }
  .dimensions-group .flex {
    flex-direction: column; /* Stack dimension inputs */
  }
  .dimensions-group .input.glassmorphism,
  .dimensions-group select.input.glassmorphism {
    width: 100% !important; /* Override inline/utility widths */
  }
   .total-shipment-details .flex {
    flex-direction: column;
  }
  .total-shipment-details .form-control.w-1\/2 { /* Target specific Tailwind class if used */
    width: 100% !important;
  }
  .container-details .flex.items-center {
    flex-direction: column;
    align-items: stretch; /* Stretch items like # of units and container type */
  }
  .container-details .form-control.items-center,
  .container-details .form-control.flex-grow {
    width: 100%;
  }
   .input-number-wrapper input[type="number"].input.glassmorphism {
    flex-grow: 1; /* Allow number input to take space */
  }
}

/* Enhanced Load Management UI */
.enhanced-load-tabs-container {
  display: flex;
  flex-direction: column;
  gap: var(--space-5);
  margin-bottom: var(--space-6);
  background: rgba(255, 255, 255, 0.7);
  border-radius: var(--radius-2xl);
  padding: var(--space-6);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border: 1px solid rgba(255, 255, 255, 0.4);
  box-shadow: 
    0 8px 32px rgba(0, 28, 56, 0.08),
    inset 0 0 0 1px rgba(255, 255, 255, 0.3);
}

.load-tabs-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-bottom: var(--space-4);
  border-bottom: 2px solid rgba(0, 28, 56, 0.08);
}

.load-tabs-title {
  font-size: 1rem;
  font-weight: 700;
  color: var(--primary);
  display: flex;
  align-items: center;
  gap: var(--space-2);
  text-transform: uppercase;
  letter-spacing: 0.025em;
}

.load-quick-actions {
  display: flex;
  gap: var(--space-2);
}

.load-quick-add-btn {
  /* Style harmonisé avec le système glassmorphism */
  background: var(--surface);
  color: var(--gray-700);
  border: 1px solid var(--border-light);
  padding: var(--space-2);
  border-radius: var(--radius-full);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  transition: all var(--duration-normal) var(--ease-out-cubic);
  box-shadow: var(--shadow-soft);
  backdrop-filter: var(--surface-blur);
  -webkit-backdrop-filter: var(--surface-blur);
}

.load-quick-add-btn:hover {
  background: var(--surface-hover);
  border-color: var(--border-medium);
  color: var(--gray-800);
  transform: translateY(-1px);
  box-shadow: var(--shadow-medium);
}

.load-quick-add-btn:disabled,
.load-quick-add-btn.loading {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none !important;
}

.load-quick-add-btn.loading:hover {
  transform: none;
  background: var(--surface);
  border-color: var(--border-light);
  box-shadow: var(--shadow-soft);
}

/* Shipment Overview Section */
.shipment-overview-section {
  margin-bottom: var(--space-6);
}

.shipment-overview-header {
  background: rgba(255, 255, 255, 0.8);
  border-radius: var(--radius-xl);
  padding: var(--space-4);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 
    0 4px 6px rgba(0, 28, 56, 0.04),
    inset 0 0 0 1px rgba(255, 255, 255, 0.2);
}

.shipment-overview-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--space-4);
}

.shipment-overview-main {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  flex: 1;
}

.shipment-overview-icon {
  background: rgba(0, 28, 56, 0.08);
  border-radius: var(--radius-lg);
  padding: var(--space-3);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--primary);
}

.shipment-overview-text h4 {
  font-size: 1.1rem;
  font-weight: 700;
  color: var(--primary);
  margin: 0 0 var(--space-1) 0;
}

.shipment-overview-text p {
  font-size: 0.9rem;
  color: var(--gray-600);
  margin: 0;
  line-height: 1.4;
}

.shipment-overview-actions {
  display: flex;
  align-items: center;
  gap: var(--space-3);
}

.shipment-preview-btn {
  /* Style harmonisé avec le système glassmorphism */
  background: var(--surface);
  color: var(--gray-700);
  border: 1px solid var(--border-light);
  padding: var(--space-4) var(--space-5);
  border-radius: var(--radius-xl);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: var(--space-2);
  font-weight: var(--font-weight-medium);
  font-size: var(--text-base);
  transition: all var(--duration-normal) var(--ease-out-cubic);
  box-shadow: var(--shadow-soft);
  backdrop-filter: var(--surface-blur);
  -webkit-backdrop-filter: var(--surface-blur);
  min-height: var(--input-height-md);
}

.shipment-preview-btn:hover {
  background: var(--surface-hover);
  border-color: var(--border-medium);
  transform: translateY(-1px);
  box-shadow: var(--shadow-medium);
  color: var(--gray-800);
}

.shipment-preview-btn:disabled,
.shipment-preview-btn.loading {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none !important;
}

.shipment-preview-btn.loading:hover {
  transform: none;
  background: var(--surface);
  border-color: var(--border-light);
  box-shadow: var(--shadow-soft);
}

/* Loading Spinners */
.loading-spinner {
  width: 16px;
  height: 16px;
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-radius: 50%;
  border-top-color: white;
  animation: spin 1s ease-in-out infinite;
}

.loading-spinner-small {
  width: 14px;
  height: 14px;
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-radius: 50%;
  border-top-color: white;
  animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.shipment-counter {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  background: rgba(16, 185, 129, 0.1);
  color: #047857;
  padding: var(--space-2) var(--space-3);
  border-radius: var(--radius-lg);
  font-weight: 600;
  font-size: 0.85rem;
  border: 1px solid rgba(16, 185, 129, 0.2);
}

.load-tabs-actions {
  display: flex;
  gap: var(--space-2);
}

.load-tabs-navigation {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: var(--space-3);
  margin-bottom: var(--space-1);
}

/* Enhanced Load Tab Item */
.enhanced-load-tab {
  position: relative;
  padding: var(--space-4);
  border-radius: var(--radius-xl);
  cursor: pointer;
  font-weight: 500;
  color: var(--gray-700);
  background: rgba(255, 255, 255, 0.9);
  border: 2px solid rgba(0, 28, 56, 0.08);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  display: flex;
  align-items: flex-start;
  gap: var(--space-3);
  font-size: 0.9rem;
  box-shadow: 0 3px 8px rgba(0, 28, 56, 0.04);
}

.enhanced-load-tab:hover {
  background: rgba(255, 255, 255, 1);
  border-color: rgba(0, 28, 56, 0.15);
  color: var(--primary);
  transform: translateY(-2px);
  box-shadow: 0 8px 16px rgba(0, 28, 56, 0.1);
}

.enhanced-load-tab.active {
  background: linear-gradient(135deg, var(--primary), var(--accent));
  color: white;
  border-color: var(--accent);
  font-weight: 600;
  box-shadow: 0 8px 24px rgba(var(--primary-rgb), 0.2);
  transform: translateY(-3px);
}

.enhanced-load-tab.active:hover {
  background: linear-gradient(135deg, var(--primary-dark), var(--accent));
  box-shadow: 0 12px 32px rgba(var(--primary-rgb), 0.25);
}

.load-tab-icon {
  flex-shrink: 0;
  width: 24px;
  height: 24px;
  font-size: 1.2rem;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-md);
  background: rgba(0, 28, 56, 0.05);
  margin-top: 2px;
}

.enhanced-load-tab.active .load-tab-icon {
  background: rgba(255, 255, 255, 0.2);
}

.load-tab-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  min-width: 0;
}

.load-tab-title {
  font-weight: 700;
  font-size: 1rem;
  line-height: 1.2;
}

.load-tab-summary {
  font-size: 0.8rem;
  opacity: 0.75;
  line-height: 1.4;
  word-wrap: break-word;
}

.enhanced-load-tab.active .load-tab-summary {
  opacity: 0.9;
}

.load-tab-actions {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
  flex-shrink: 0;
}

.load-tab-action-btn {
  background: rgba(0, 28, 56, 0.05);
  border: none;
  padding: var(--space-2);
  cursor: pointer;
  border-radius: var(--radius-md);
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
}

.load-tab-action-btn:hover {
  background: rgba(0, 28, 56, 0.1);
  transform: scale(1.05);
}

.enhanced-load-tab.active .load-tab-action-btn {
  background: rgba(255, 255, 255, 0.15);
  color: rgba(255, 255, 255, 0.9);
}

.enhanced-load-tab.active .load-tab-action-btn:hover {
  background: rgba(255, 255, 255, 0.25);
  color: white;
}

/* Total Summary Box - Style harmonisé */
.load-total-summary {
  background: var(--surface);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-xl);
  padding: var(--space-5);
  margin-top: var(--space-4);
  position: relative;
  overflow: hidden;
  backdrop-filter: var(--surface-blur);
  -webkit-backdrop-filter: var(--surface-blur);
  box-shadow: var(--shadow-soft);
}

.load-total-summary::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: var(--accent);
}

.load-total-summary-header {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  margin-bottom: var(--space-4);
}

.load-total-summary-title {
  font-size: 0.9rem;
  font-weight: 700;
  color: var(--primary);
  text-transform: uppercase;
  letter-spacing: 0.025em;
}

.load-total-summary-content {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: var(--space-4);
}

.load-total-summary-item {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
  text-align: center;
}

.load-total-summary-label {
  font-size: 0.7rem;
  font-weight: 600;
  color: var(--gray-500);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.load-total-summary-value {
  font-size: 1.3rem;
  font-weight: 800;
  color: var(--primary);
  line-height: 1;
}

/* Action Buttons */
.load-action-btn {
  padding: var(--space-2) var(--space-4);
  border-radius: var(--radius-lg);
  font-weight: 500;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid transparent;
  display: flex;
  align-items: center;
  gap: var(--space-2);
  font-size: 0.875rem;
}

.load-action-btn-add {
  /* Style harmonisé avec le système glassmorphism */
  background: var(--surface);
  color: var(--gray-700);
  border: 1px solid var(--border-light);
  box-shadow: var(--shadow-soft);
  backdrop-filter: var(--surface-blur);
  -webkit-backdrop-filter: var(--surface-blur);
}

.load-action-btn-add:hover {
  background: var(--surface-hover);
  border-color: var(--border-medium);
  color: var(--gray-800);
  transform: translateY(-1px);
  box-shadow: var(--shadow-medium);
}

.load-action-btn-duplicate {
  background: rgba(255, 255, 255, 0.8);
  color: var(--primary);
  border-color: var(--primary);
}

.load-action-btn-duplicate:hover {
  background: rgba(var(--primary-rgb), 0.08);
  transform: translateY(-1px);
}

.load-tabs-container .load-tab-item { /* Increased specificity */
  padding: var(--space-2-5) var(--space-5);
  border: 1px solid var(--gray-300); /* Clearer border for inactive */
  border-radius: var(--radius-full); /* Pill shape */
  cursor: pointer;
  font-weight: 500;
  color: var(--gray-700); /* Dark text for inactive */
  background-color: rgba(255, 255, 255, 0.75); /* Slightly more opaque light background */
  transition: all 0.2s ease-in-out, box-shadow 0.2s ease-in-out, transform 0.2s ease-in-out;
  display: flex;
  align-items: center;
  gap: var(--space-2);
  font-size: 0.9rem;
  box-shadow: 0 1px 2px rgba(0, 28, 56, 0.05);
}

.load-tabs-container .load-tab-item:hover { /* Increased specificity */
  background-color: rgba(255, 255, 255, 0.95); /* Brighter on hover */
  border-color: var(--gray-400);
  color: var(--primary); /* Use primary color for text on hover */
  transform: translateY(-1px);
  box-shadow: 0 3px 8px rgba(0, 28, 56, 0.08); /* Slightly more pronounced shadow */
}

.load-tabs-container .load-tab-item.active { /* Increased specificity */
  background-color: var(--primary) !important; /* Solid dark primary background */
  background-image: none !important; /* Ensure no other background image */
  color: white !important; /* White text for high contrast */
  border-color: var(--primary-dark) !important; /* Darker border for definition */
  font-weight: 600 !important; /* Bolder font */
  box-shadow: 0 5px 12px rgba(var(--primary-rgb), 0.3) !important; /* Prominent shadow */
  transform: translateY(-2px); /* Slightly more lift for active */
}

.load-tabs-container .load-tab-item.active:hover { /* Increased specificity */
  background-color: var(--primary-dark) !important; /* Darken on hover */
  box-shadow: 0 6px 15px rgba(var(--primary-rgb), 0.35) !important;
  border-color: var(--primary-dark) !important;
}

.load-tabs-container .delete-load-btn { /* Increased specificity for base delete button */
  background: none;
  border: none;
  padding: 3px; /* Slightly larger click area */
  margin-left: var(--space-1-5);
  cursor: pointer;
  color: var(--gray-500); /* Default color for inactive tabs */
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-full);
  transition: all 0.2s ease;
}

.load-tabs-container .delete-load-btn:hover { /* Increased specificity */
  color: var(--error-dark);
  background-color: rgba(var(--error-rgb), 0.12); /* Slightly more visible hover */
}

.load-tabs-container .load-tab-item.active .delete-load-btn { /* Increased specificity */
  color: rgba(255, 255, 255, 0.75) !important; /* Light color for visibility on dark bg */
}

.load-tabs-container .load-tab-item.active .delete-load-btn:hover { /* Increased specificity */
  color: white !important;
  background-color: rgba(255, 255, 255, 0.15) !important; /* Subtle hover on active tab */
  transform: scale(1.05);
}

.load-tabs-container .delete-load-btn svg { /* Increased specificity */
  display: block;
  width: 16px;
  height: 16px;
}

/* Styling for active cargo details section */
.loose-cargo-section,
.container-details {
  /* Ensure base classes have transition for smooth effect */
  transition: background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease; 
}

.active-cargo-details {
  background-color: rgba(255, 255, 255, 0.28) !important; /* Slightly more opaque than base bg-white/20 */
  border: 1.5px solid var(--accent) !important; /* Thin accent border */
  box-shadow: 0 7px 22px rgba(var(--accent-rgb, 214, 223, 32), 0.18) !important; /* Override base shadow with a slightly different accent shadow */
}

/* Enhanced Cargo Step Styles */

.form-control-horizontal {
  display: flex;
  align-items: center; /* Vertically align label and control */
  justify-content: space-between; /* Distribute space */
  margin-bottom: var(--space-5); /* Standard margin */
}

.form-control-horizontal .label-text {
  margin-bottom: 0; /* Remove bottom margin as it's now inline */
  margin-right: var(--space-4); /* Space between label and control */
  flex-shrink: 0; /* Prevent label from shrinking */
}

.form-control-horizontal .input-number-wrapper {
  flex-grow: 1; /* Allow number wrapper to take remaining space */
  max-width: 200px; /* Optional: prevent it from becoming too wide */
}

/* Styling for specific groups like dimensions and weight - No encadrement */
.dimensions-group,
.weight-group {
  padding: 0; /* Remove padding */
  background: transparent; /* Remove background */
  border-radius: 0; /* Remove border radius */
  margin-top: var(--space-4); /* Reduce top margin */
  border: none; /* Remove border */
  box-shadow: none; /* Remove shadow */
}

.dimensions-group .label-text,
.weight-group .label-text {
  font-weight: 600; /* Make labels within these groups slightly bolder */
  color: var(--primary); /* Emphasize these labels */
  margin-bottom: var(--space-3);
  margin-top: var(--space-4); /* Add top margin to maintain spacing */
}

/* Adjustments for responsive view if .form-control-horizontal becomes too cramped */
@media (max-width: 480px) { /* Or a breakpoint like 520px */
  .form-control-horizontal {
    flex-direction: column;
    align-items: flex-start; /* Align label to the start */
  }
  .form-control-horizontal .label-text {
    margin-bottom: var(--space-2); /* Add margin back when stacked */
    margin-right: 0;
  }
  .form-control-horizontal .input-number-wrapper {
    width: 100%; /* Take full width when stacked */
    max-width: none; /* Remove max-width constraint */
  }
}

/* Enhanced styling for sub-sections within Step 4's loose cargo (e.g., unit details, total details) */
/* These are intended to replace the simpler styling on .unit-details and .total-shipment-details */
.sub-section-card {
  background: transparent;               /* MODIFIED: Remove background */
  border-radius: 0;                      /* MODIFIED: Remove radius as it's no longer a distinct visual card */
  padding: var(--space-5);               /* Keep padding for internal content layout */
  margin-top: var(--space-5);            /* Keep margins for spacing relative to siblings */
  margin-bottom: var(--space-5);
  border: none;                          /* Border was already none from previous step */
  box-shadow: none;                      /* MODIFIED: Remove shadow */
  transition: none;                      /* MODIFIED: No visual properties to transition */
}

.sub-section-card:focus-within {
  /* MODIFIED: No special focus style if the card itself is visually gone */
  box-shadow: none; 
}

/* Labels directly under a sub-section-card, if any, can have adjusted margin */
.sub-section-card > .label-text {
   margin-bottom: var(--space-4); /* Ensure space before next element if label is a title for the card */
}

/* The existing .dimensions-group and .weight-group will be nested inside .sub-section-card.
   Their current background (rgba(255, 255, 255, 0.5)) will make them appear
   slightly more transparent than the .sub-section-card, which is a good layering effect.
*/

/* 
  Further refinement: Maintain spacing for dimensions/weight groups 
  inside sub-section-cards without encadrement
*/
.sub-section-card .dimensions-group,
.sub-section-card .weight-group {
  margin-top: var(--space-4); /* Increase margin to maintain visual separation */
  margin-bottom: var(--space-3); /* Add bottom margin */
}

/* === Styles for Step 4 Choice Options (mimicking Step 3 location-type-option) === */

/* Group for Step 4 choice options */
.step4-choice-option-group {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--space-5);
  margin: var(--space-6) 0;
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
}

/* Extended group for 3 options including "I'm not sure" */
.step4-choice-option-group-extended {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--space-4);
  margin: var(--space-6) 0;
  max-width: 900px;
  margin-left: auto;
  margin-right: auto;
}

/* Base style for Step 4 choice options */
.step4-choice-option {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-8) var(--space-6); 
  border-radius: 16px;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  background: rgba(255, 255, 255, 0.95);
  border: 3px solid rgba(156, 163, 175, 0.2);
  text-align: center;
  min-height: 140px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
}

.step4-choice-option:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  border-color: rgba(156, 163, 175, 0.4);
}

/* Loose Cargo styling - Green theme */
.step4-choice-option[data-choice-theme="loose-cargo"].selected {
  border-color: #10b981;
  background: rgba(16, 185, 129, 0.03);
  box-shadow: 0 4px 20px rgba(16, 185, 129, 0.15);
}

.step4-choice-option[data-choice-theme="loose-cargo"].selected svg {
  color: #10b981;
}

.step4-choice-option[data-choice-theme="loose-cargo"].selected span {
  color: #065f46;
  font-weight: 700;
}

/* Container styling - Purple/Blue theme */
.step4-choice-option[data-choice-theme="container"].selected {
  border-color: #8b5cf6;
  background: rgba(139, 92, 246, 0.03);
  box-shadow: 0 4px 20px rgba(139, 92, 246, 0.15);
}

.step4-choice-option[data-choice-theme="container"].selected svg {
  color: #8b5cf6;
}

.step4-choice-option[data-choice-theme="container"].selected span {
  color: #581c87;
  font-weight: 700;
}

/* Unsure/Help styling - Reassuring Blue theme */
.step4-choice-option[data-choice-theme="unsure"].selected {
  border-color: #3b82f6;
  background: rgba(59, 130, 246, 0.03);
  box-shadow: 0 4px 20px rgba(59, 130, 246, 0.15);
}

.step4-choice-option[data-choice-theme="unsure"].selected svg {
  color: #3b82f6;
}

.step4-choice-option[data-choice-theme="unsure"].selected span {
  color: #1e40af;
  font-weight: 700;
}

.step4-choice-option svg {
  width: 48px;   
  height: 48px;
  margin-bottom: var(--space-4);
  transition: all 0.3s ease;
  color: var(--gray-500);
}

.step4-choice-option span {
  font-weight: 600;
  font-size: 1.1rem; 
  color: var(--gray-700);
  transition: all 0.3s ease;
}

/* Style for the summary text when its panel is NOT active */
.shipment-panel:not(.border-accent) .load-summary-bar span {
  /* text-primary is applied via Tailwind in JSX */
  color: var(--gray-700);
  font-weight: 600;
}

.shipment-panel.border-accent .load-summary-bar {
  /* The bg-primary and text-white will come from Tailwind */
  /* Ensure dark primary background and white text for active state */
  background-color: var(--accent-light);
  cursor: default; /* Not clickable when open */
  color: white;
  border-bottom-color: transparent !important; /* Remove bottom border to merge with content */
}
.shipment-panel.border-accent .load-summary-bar span {
  font-weight: 600; /* Bolder text for active summary */
  color: white !important; /* Ensure span text is also white */
}


/* Styling for the delete button within the summary bar */
/* Tailwind classes handle most of this: p-1, rounded-full, transition-colors, duration-150 */
/* Conditional text/hover colors are also via Tailwind in JSX */
/* Example: isActive ? 'text-white/70 hover:text-white hover:bg-white/20' : 'text-gray-400 hover:text-error hover:bg-error/10' */
.load-summary-bar .delete-load-item-btn svg {
  display: block; /* Ensure SVG aligns well */
}

.cargo-details-form-section {
  /* Tailwind classes: p-4 md:p-6 */
  background-color: transparent; /* Allows panel background to show, or active-cargo-details to override */
  transition: padding 0.3s ease; /* Smooth transition if padding changes */
}

/*
  Adjust .active-cargo-details:
  The parent .shipment-panel (with .border-accent, .shadow-lg from Tailwind)
  now provides the main visual indication of the active state.
  So, .active-cargo-details should focus on subtle background or internal styling
  and avoid redundant borders or shadows.
*/
.active-cargo-details {
  background-color: rgba(255, 255, 255, 0.2) !important; /* Subtle differentiation for the content area */
  border: none !important; /* Remove its own border; parent .shipment-panel has it */
  box-shadow: none !important; /* Remove its own shadow; parent .shipment-panel has it */
  /* Ensure padding is consistent or slightly different if needed */
  /* padding-top: var(--space-2); /* Optional: to visually separate from active summary bar */
}

/*
  When only one load exists, the .shipment-panel will not have .border-accent.
  The .cargo-details-form-section inside it gets pt-0 (padding-top: 0) from Tailwind.
  It will use the default .shipment-panel background.
*/
.shipments-container > .shipment-panel:only-child {
  /* Specific styles for the panel when it's the only one, if needed. */
  /* For example, no strong border if it's not meant to look "activatable" */
   border-color: transparent; /* Make border less prominent if it's the only one */
   box-shadow: none; /* Remove shadow if it's the only one */
   background-color: transparent; /* Make it blend more if only one */
}

.shipments-container > .shipment-panel:only-child .cargo-details-form-section {
  padding-top: 0 !important; /* Ensure this overrides other padding, applied by Tailwind anyway */
  background-color: transparent; /* Blend with the page */
}



/* 3 option layout */
.shipping-modes.three-options {
  grid-template-columns: repeat(1, 1fr);
  gap: 1rem;
}

@media (min-width: 640px) {
  .shipping-modes.three-options {
    grid-template-columns: repeat(3, 1fr);
  }
}

/* 4 option layout (2x2) */
.shipping-modes.four-options {
  grid-template-columns: repeat(2, 1fr);
}

@media (min-width: 640px) {
  .shipping-modes.four-options {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* Progressive disclosure animations and styles */
.step-1-container {
  position: relative;
}

.country-selection-phase,
.location-type-phase,
.address-details-phase {
  position: relative;
  transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.phase-header {
  margin-bottom: 1.5rem;
}

.phase-header h3 {
  animation: slideInFromLeft 0.5s ease-out;
}

.phase-header p {
  animation: fadeIn 0.6s ease-out 0.1s both;
}

/* Country search animations */
.country-selection-phase .form-control {
  animation: slideInUp 0.5s ease-out;
  animation-fill-mode: both;
}

/* Location type cards animations */
.location-type-phase .location-types > div {
  animation: slideInUp 0.5s ease-out;
  animation-fill-mode: both;
}

.location-type-phase .location-types > div:nth-child(1) { animation-delay: 0.1s; }
.location-type-phase .location-types > div:nth-child(2) { animation-delay: 0.2s; }
.location-type-phase .location-types > div:nth-child(3) { animation-delay: 0.3s; }
.location-type-phase .location-types > div:nth-child(4) { animation-delay: 0.4s; }

/* Address form animations */
.address-details-phase .address-details > div {
  animation: slideInUp 0.4s ease-out;
  animation-fill-mode: both;
}

.address-details-phase .address-details > div:nth-child(1) { animation-delay: 0.1s; }
.address-details-phase .address-details > div:nth-child(2) { animation-delay: 0.2s; }

/* Keyframe animations */
@keyframes slideInFromLeft {
  from {
    transform: translateX(-20px);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideInUp {
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

/* Phase number indicators with completion states */
.phase-header h3 span {
  position: relative;
  overflow: hidden;
}

.phase-header h3 span::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.3) 50%, transparent 70%);
  transform: translateX(-100%);
  transition: transform 0.6s ease;
}

.phase-header h3 span:hover::after {
  transform: translateX(100%);
}

/* Enhanced hover states for country search */
.country-selection-phase .country-option {
  transition: all 0.3s ease;
}

.country-selection-phase .country-option:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 8px rgba(59, 130, 246, 0.15);
}

/* Pulse animation for Popular badges */
@keyframes pulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.05);
    opacity: 0.8;
  }
}

/* Smooth transitions for all interactive elements */
.step-1-container * {
  transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease, background-color 0.3s ease;
}

/* Focus states for accessibility */
.step-1-container [tabindex="0"]:focus,
.step-1-container button:focus,
.step-1-container input:focus {
  outline: 3px solid rgba(59, 130, 246, 0.5);
  outline-offset: 2px;
}

/* Mobile responsiveness for progressive disclosure */
@media (max-width: 640px) {
  .phase-header h3 {
    font-size: 1rem;
  }
  
  .location-type-phase .location-types {
    grid-template-columns: 1fr !important;
    gap: 1rem !important;
  }

  /* Beginner section mobile adjustments */
  .beginner-option-section-bottom {
    margin-top: 0.75rem;
  }

  .beginner-option-section-bottom .mode-option {
    max-width: 100%;
    margin: 0 1rem;
  }

  .options-separator-bottom {
    margin: 1.25rem 0 0.75rem 0;
  }

  .options-separator-bottom span {
    font-size: 0.75rem;
    padding: 0.35rem 0.7rem;
  }

  .shipping-modes.three-options {
    gap: 0.75rem;
  }

  .shipping-modes.four-options {
    gap: 0.75rem;
  }
}

/* Step 2 Progressive Disclosure Styles */
.step-2-container {
  position: relative;
}

.shipping-options-guidance-phase,
.mode-selection-phase {
  position: relative;
  transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* Beginner section styling - bottom position */
.beginner-option-section-bottom {
  margin-top: 1rem;
  position: relative;
  display: flex;
  justify-content: center;
}

.beginner-option-section-bottom .mode-option {
  opacity: 0.6;
  transition: all 0.3s ease, opacity 0.3s ease;
  max-width: 380px;
  width: 100%;
  background: linear-gradient(135deg, rgba(107, 114, 128, 0.04), rgba(255, 255, 255, 0.85));
}

.beginner-option-section-bottom .mode-option:hover {
  opacity: 0.8;
  background: linear-gradient(135deg, rgba(107, 114, 128, 0.06), rgba(255, 255, 255, 0.9));
}

.beginner-option-section-bottom .mode-option.selected {
  opacity: 0.95;
  background: linear-gradient(135deg, rgba(107, 114, 128, 0.08), rgba(255, 255, 255, 0.95));
}

.beginner-option-section-bottom .mode-option svg {
  color: #6b7280;
  filter: drop-shadow(0 1px 2px rgba(107, 114, 128, 0.2));
}

/* Bottom separator styling */
.options-separator-bottom {
  margin: 1.5rem 0 1rem 0;
}

.options-separator-bottom span {
  font-size: 0.75rem;
  color: #a1a1aa;
  font-weight: 300;
  background: rgba(255, 255, 255, 0.5);
  padding: 0.3rem 0.6rem;
  border-radius: 12px;
  border: 1px solid #f4f4f5;
  backdrop-filter: blur(2px);
  white-space: nowrap;
  opacity: 0.8;
}

/* Step 4 Progressive Disclosure Styles */
.step-4-container {
  position: relative;
}

.cargo-type-guidance-phase,
.cargo-details-phase {
  position: relative;
  transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.cargo-type-guidance-phase .phase-header h3 {
  animation: slideInFromLeft 0.5s ease-out;
}

.cargo-details-phase {
  animation: fadeIn 0.6s ease-out 0.2s both;
}

.cargo-details-phase .phase-header h3 {
  animation: slideInFromLeft 0.5s ease-out 0.3s both;
}

.shipping-options-guidance-phase .phase-header h3 {
  animation: slideInFromLeft 0.5s ease-out;
}

.mode-selection-phase {
  animation: fadeIn 0.6s ease-out 0.2s both;
}

/* Enhanced mode option styling */
.mode-selection-phase .mode-option {
  position: relative;
  overflow: hidden;
}

.mode-selection-phase .mode-option::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: left 0.6s ease;
}

.mode-selection-phase .mode-option:hover::before {
  left: 100%;
}

.mode-additional-info {
  transition: all 0.3s ease;
  opacity: 0.8;
}

.mode-option:hover .mode-additional-info {
  opacity: 1;
  transform: translateY(-1px);
}

.mode-option.selected .mode-additional-info {
  opacity: 1;
  font-weight: 600;
}

/* Selection feedback animation */
.selection-feedback {
  transform: translateY(0);
  opacity: 1;
  animation: none;
}

@keyframes slideInUp {
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

/* Smooth transitions for all interactive elements in step 2 */
.step-2-container * {
  transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease, background-color 0.3s ease;
}

/* Focus states for accessibility in step 2 */
.step-2-container [tabindex="0"]:focus,
.step-2-container .mode-option:focus {
  outline: 3px solid rgba(107, 114, 128, 0.5) !important;
  outline-offset: 2px;
}

/* Step 4 Unified Input Styles - Match Step 1 */

/* Package Selection Row - Horizontal layout, no encadrement */
.package-selection-row {
  display: flex;
  gap: var(--space-6);
  align-items: flex-end;
  margin-bottom: var(--space-6);
  padding: 0; /* Remove padding */
  background: transparent; /* Remove background */
  border-radius: 0; /* Remove border radius */
  border: none; /* Remove border */
}

.package-type-section {
  flex: 1;
}

.units-counter-section {
  flex: 0 0 auto;
  min-width: 140px;
}

/* Compact button group for package types */
.button-group-horizontal {
  display: flex;
  border-radius: var(--radius-lg);
  overflow: hidden;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  margin-top: var(--space-2);
}

.btn-tab-compact {
  flex: 1;
  padding: var(--space-3) var(--space-4);
  background-color: rgba(255, 255, 255, 0.8);
  color: var(--gray-700);
  border: none;
  cursor: pointer;
  transition: all 0.3s ease;
  font-weight: 500;
  font-size: 0.9rem;
  border-right: 1px solid rgba(0, 28, 56, 0.1);
}

.btn-tab-compact:last-child {
  border-right: none;
}

.btn-tab-compact:hover {
  background-color: rgba(255, 255, 255, 0.95);
  color: var(--primary);
}

.btn-tab-compact.active {
  background-color: var(--primary);
  color: white;
  font-weight: 600;
  box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
}

/* Compact number input wrapper */
.input-number-wrapper-compact {
  display: flex;
  align-items: center;
  border-radius: var(--radius-lg);
  overflow: hidden;
  background: rgba(255, 255, 255, 0.8);
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  margin-top: var(--space-2);
  width: fit-content;
}

.btn-number-control-compact {
  background-color: rgba(255, 255, 255, 0.6);
  border: none;
  padding: var(--space-2) var(--space-3);
  cursor: pointer;
  color: var(--primary);
  transition: background-color 0.2s ease, color 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
}

.btn-number-control-compact:hover {
  background-color: rgba(var(--primary-rgb, 0, 28, 56), 0.08);
  color: var(--primary-dark);
}

.input-number-compact {
  border: none;
  box-shadow: none;
  background: transparent;
  padding: var(--space-2) var(--space-1);
  width: 45px;
  text-align: center;
  font-weight: 600;
  color: var(--primary);
  border-left: 1px solid rgba(0, 28, 56, 0.1);
  border-right: 1px solid rgba(0, 28, 56, 0.1);
}

.input-number-compact:focus {
  outline: none;
  background: rgba(255, 255, 255, 0.9);
}

/* Step 4 labels - match Step 1 style */
.label-text-compact {
  display: block;
  font-weight: 500; /* Match Step 1 font-weight */
  color: var(--primary);
  margin-bottom: var(--space-2);
  font-size: 0.9rem;
}

/* Ensure all Step 4 labels use consistent styling */
.step-4-container .label-text {
  font-weight: 500; /* Match Step 1 font-weight */
  font-size: 0.9rem;
}

/* Special styling for total shipment section labels */
.total-volume-section .label-text-compact,
.total-weight-section .label-text-compact {
  font-size: 0.95rem;
  font-weight: 600;
  margin-bottom: var(--space-2);
  color: var(--primary);
}

/* Pallet type section spacing without encadrement */
.step-4-container .form-control {
  margin-bottom: var(--space-5); /* Increase spacing between sections */
}

.step-4-container .label-text {
  margin-top: var(--space-1); /* Add subtle top margin */
}

/* Dimensions and Weight Compact Layout - No encadrement */
.dimensions-weight-compact {
  display: flex;
  flex-direction: column;
  gap: var(--space-6); /* Increase gap to maintain visual separation */
  margin-top: var(--space-5); /* Increase top margin */
}

.dimensions-section-compact {
  padding: 0; /* Remove padding */
  background: transparent; /* Remove background */
  border-radius: 0; /* Remove border radius */
  border: none; /* Remove border */
}

.weight-section-compact {
  padding: 0; /* Remove padding */
  background: transparent; /* Remove background */
  border-radius: 0; /* Remove border radius */
  border: none; /* Remove border */
}

/* Dimensions input row - Step 1 style */
.dimensions-input-row {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  margin-top: var(--space-2);
}

.dimension-input-compact {
  min-width: 100px;
  flex: 1;
  max-width: 140px;
  /* Use standard input styling from step 1 */
  padding: var(--space-4) var(--space-5);
  border-radius: var(--radius-xl);
  font-size: 1rem;
  font-weight: 500;
  transition: all 0.2s ease;
  text-align: center;
  /* Apply glassmorphism styling */
  background: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 
    0 4px 6px rgba(0, 28, 56, 0.05),
    inset 0 0 0 1px rgba(255, 255, 255, 0.2);
  outline: none;
  /* Support international number input */
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', monospace, sans-serif;
  unicode-bidi: embed;
}

.dimension-input-compact:hover {
  background: rgba(255, 255, 255, 0.9);
  box-shadow: 
    0 8px 12px rgba(0, 28, 56, 0.08),
    inset 0 0 0 1px rgba(255, 255, 255, 0.3);
  transform: translateY(-2px);
}

.dimension-input-compact:focus {
  border-color: var(--accent);
  box-shadow: 
    0 0 0 3px rgba(214, 223, 32, 0.15),
    inset 0 0 0 1px rgba(214, 223, 32, 0.3);
}

.dimension-separator {
  color: var(--gray-400);
  font-weight: 600;
  font-size: 1.1rem;
  margin: 0 var(--space-1);
}

.unit-select-compact {
  /* Use standard input styling from step 1 */
  padding: var(--space-4) var(--space-5);
  border-radius: var(--radius-xl);
  font-size: 1rem;
  font-weight: 500;
  transition: all 0.2s ease;
  color: var(--primary);
  min-width: 100px;
  text-align: center;
  /* Apply glassmorphism styling */
  background: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 
    0 4px 6px rgba(0, 28, 56, 0.05),
    inset 0 0 0 1px rgba(255, 255, 255, 0.2);
  outline: none;
  cursor: pointer;
}

.unit-select-compact:hover {
  background: rgba(255, 255, 255, 0.9);
  box-shadow: 
    0 8px 12px rgba(0, 28, 56, 0.08),
    inset 0 0 0 1px rgba(255, 255, 255, 0.3);
  transform: translateY(-2px);
}

.unit-select-compact:focus {
  border-color: var(--accent);
  box-shadow: 
    0 0 0 3px rgba(214, 223, 32, 0.15),
    inset 0 0 0 1px rgba(214, 223, 32, 0.3);
}

/* Weight input row */
.weight-input-row {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  margin-top: var(--space-2);
}

.weight-input-compact {
  flex: 1;
  max-width: 300px;
  /* Use standard input styling from step 1 */
  padding: var(--space-4) var(--space-5);
  border-radius: var(--radius-xl);
  font-size: 1rem;
  font-weight: 500;
  transition: all 0.2s ease;
  /* Apply glassmorphism styling */
  background: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 
    0 4px 6px rgba(0, 28, 56, 0.05),
    inset 0 0 0 1px rgba(255, 255, 255, 0.2);
  outline: none;
  /* Support international number input */
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', monospace, sans-serif;
  unicode-bidi: embed;
}

.weight-input-compact:hover {
  background: rgba(255, 255, 255, 0.9);
  box-shadow: 
    0 8px 12px rgba(0, 28, 56, 0.08),
    inset 0 0 0 1px rgba(255, 255, 255, 0.3);
  transform: translateY(-2px);
}

.weight-input-compact:focus {
  border-color: var(--accent);
  box-shadow: 
    0 0 0 3px rgba(214, 223, 32, 0.15),
    inset 0 0 0 1px rgba(214, 223, 32, 0.3);
}

/* Validation messages */
.validation-message {
  color: var(--error);
  font-size: 0.75rem;
  margin-top: var(--space-1);
  font-weight: 500;
}

/* Total Shipment Styles */
.total-shipment-details {
  margin-top: var(--space-4);
}

.info-banner-total {
  display: flex;
  align-items: flex-start;
  padding: var(--space-4);
  border-radius: var(--radius-lg);
  background-color: rgba(59, 130, 246, 0.08);
  border: 1px solid rgba(59, 130, 246, 0.2);
  color: var(--gray-700);
  font-size: 0.875rem;
  line-height: 1.6;
  margin-bottom: var(--space-4);
}

.info-banner-total svg {
  flex-shrink: 0;
  margin-right: var(--space-3);
  margin-top: 2px;
  color: #3B82F6;
}

.total-description {
  color: var(--gray-600);
  font-size: 0.875rem;
  margin-bottom: var(--space-3);
  line-height: 1.5;
}

.total-inputs-row {
  display: flex;
  gap: var(--space-4);
  margin-top: var(--space-4);
}

@media (max-width: 768px) {
  .total-inputs-row {
    flex-direction: column;
    gap: var(--space-6);
  }
}

.total-volume-section, .total-weight-section {
  flex: 1;
  min-width: 0; /* Allow flex items to shrink */
}

.total-input-group {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  margin-top: var(--space-2);
}

.total-input-compact {
  flex: 1;
  min-width: 0; /* Allow to shrink */
  max-width: 200px; /* Limit maximum width */
  /* Use standard input styling from step 1 but more compact */
  padding: var(--space-3) var(--space-4);
  border-radius: var(--radius-xl);
  font-size: 0.95rem;
  font-weight: 500;
  transition: all 0.2s ease;
  /* Apply glassmorphism styling */
  background: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 
    0 4px 6px rgba(0, 28, 56, 0.05),
    inset 0 0 0 1px rgba(255, 255, 255, 0.2);
  outline: none;
}

.total-input-compact:hover {
  background: rgba(255, 255, 255, 0.9);
  box-shadow: 
    0 8px 12px rgba(0, 28, 56, 0.08),
    inset 0 0 0 1px rgba(255, 255, 255, 0.3);
  transform: translateY(-2px);
}

.total-input-compact:focus {
  border-color: var(--accent);
  box-shadow: 
    0 0 0 3px rgba(214, 223, 32, 0.15),
    inset 0 0 0 1px rgba(214, 223, 32, 0.3);
}

.total-unit-select-compact {
  /* Use standard input styling from step 1 but more compact */
  padding: var(--space-3) var(--space-3);
  border-radius: var(--radius-xl);
  font-size: 0.9rem;
  font-weight: 500;
  transition: all 0.2s ease;
  color: var(--primary);
  min-width: 70px;
  max-width: 90px;
  text-align: center;
  cursor: pointer;
  flex-shrink: 0; /* Don't shrink the dropdown */
  /* Apply glassmorphism styling */
  background: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 
    0 4px 6px rgba(0, 28, 56, 0.05),
    inset 0 0 0 1px rgba(255, 255, 255, 0.2);
  outline: none;
}

.total-unit-select-compact:hover {
  background: rgba(255, 255, 255, 0.9);
  box-shadow: 
    0 8px 12px rgba(0, 28, 56, 0.08),
    inset 0 0 0 1px rgba(255, 255, 255, 0.3);
  transform: translateY(-2px);
}

.total-unit-select-compact:focus {
  border-color: var(--accent);
  box-shadow: 
    0 0 0 3px rgba(214, 223, 32, 0.15),
    inset 0 0 0 1px rgba(214, 223, 32, 0.3);
}

/* Responsive adjustments for compact layout */
@media (max-width: 768px) {
  .package-selection-row {
    flex-direction: column;
    gap: var(--space-4);
    align-items: stretch;
  }
  
  .package-selection-row .units-counter-section {
    width: 100%;
    min-width: 0;
  }
  
  .package-selection-row .input-number-wrapper-compact {
    width: 100%;
    display: grid;
    grid-template-columns: auto 1fr auto;
  }

  .package-selection-row .input-number-compact {
    width: 100%;
  }
  
  .units-counter-section {
    min-width: auto;
  }
  
  .dimensions-input-row {
    flex-wrap: wrap;
    gap: var(--space-2);
  }
  
  .dimension-input-compact {
    width: 70px;
  }
  
  .dimensions-weight-compact {
    gap: var(--space-5); /* Maintain spacing on mobile without encadrement */
  }

  .total-inputs-row {
    flex-direction: column;
    gap: var(--space-4);
  }
  
  .total-input-compact {
    max-width: none; /* Remove max-width on mobile */
  }
  
  .total-input-group {
    gap: var(--space-2);
  }

  /* Enhanced Load Management Mobile */
  .enhanced-load-tabs-container {
    padding: var(--space-4);
    margin-bottom: var(--space-5);
  }
  
  .load-tabs-header {
    flex-direction: column;
    align-items: stretch;
    gap: var(--space-3);
    padding-bottom: var(--space-3);
  }
  
  .load-tabs-title {
    font-size: 0.9rem;
  }
  
  .load-quick-add-btn {
    width: 32px;
    height: 32px;
    align-self: center;
  }
  
  .load-tabs-navigation {
    grid-template-columns: 1fr;
    gap: var(--space-2);
  }
  
  .enhanced-load-tab {
    padding: var(--space-3);
  }
  
  .load-tab-content {
    gap: var(--space-1);
  }
  
  .load-tab-title {
    font-size: 0.9rem;
  }
  
  .load-tab-summary {
    font-size: 0.75rem;
  }
  
  .load-tab-actions {
    flex-direction: row;
    gap: var(--space-1);
  }
  
  .load-tab-action-btn {
    width: 28px;
    height: 28px;
  }
  
  .load-total-summary {
    padding: var(--space-4);
  }
  
  .load-total-summary-content {
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-3);
  }
  
  .load-total-summary-value {
    font-size: 1.1rem;
  }
  
  /* Shipment Overview Tablet */
  .shipment-overview-content {
    flex-direction: column;
    gap: var(--space-3);
    align-items: center;
  }
  
  .shipment-overview-actions {
    justify-content: center;
  }
}

@media (max-width: 480px) {
  .dimensions-input-row {
    flex-direction: column;
    align-items: stretch;
  }
  
  .dimension-input-compact {
    width: 100%;
    text-align: left;
  }
  
  .dimension-separator {
    display: none;
  }
  
  .weight-input-row {
    flex-direction: column;
    align-items: stretch;
  }
  
  .weight-input-compact {
    max-width: none;
  }
  
  /* Enhanced Load Management Small Mobile */
  .enhanced-load-tabs-container {
    padding: var(--space-3);
    margin-bottom: var(--space-4);
  }
  
  .load-tabs-header {
    gap: var(--space-2);
    padding-bottom: var(--space-2);
  }
  
  .load-tabs-title {
    font-size: 0.85rem;
  }
  
  .load-quick-add-btn {
    width: 28px;
    height: 28px;
  }
  
  .enhanced-load-tab {
    padding: var(--space-2);
    flex-direction: column;
    align-items: stretch;
  }
  
  .load-tab-icon {
    width: 20px;
    height: 20px;
    align-self: flex-start;
  }
  
  .load-tab-title {
    font-size: 0.85rem;
  }
  
  .load-tab-summary {
    font-size: 0.7rem;
  }
  
  .load-tab-actions {
    align-self: flex-end;
    margin-top: var(--space-2);
  }
  
  .load-tab-action-btn {
    width: 24px;
    height: 24px;
  }
  
  .load-total-summary {
    padding: var(--space-3);
  }
  
  .load-total-summary-content {
    grid-template-columns: 1fr;
    gap: var(--space-2);
  }
  
  .load-total-summary-value {
    font-size: 1rem;
  }
  
  /* Shipment Overview Mobile */
  .shipment-overview-header {
    padding: var(--space-3);
  }
  
  .shipment-overview-content {
    flex-direction: column;
    gap: var(--space-3);
    align-items: stretch;
  }
  
  .shipment-overview-main {
    gap: var(--space-2);
  }
  
  .shipment-overview-icon {
    padding: var(--space-2);
  }
  
  .shipment-overview-text h4 {
    font-size: 1rem;
  }
  
  .shipment-overview-text p {
    font-size: 0.8rem;
  }
  
  .shipment-preview-btn {
    padding: var(--space-2) var(--space-3);
    font-size: 0.8rem;
    align-self: center;
  }
  
  .shipment-counter {
    padding: var(--space-1) var(--space-2);
    font-size: 0.8rem;
    align-self: center;
  }
  
  /* Responsive layout for 3-option choice group */
  .step4-choice-option-group-extended {
    grid-template-columns: 1fr;
    gap: var(--space-3);
    max-width: 400px;
  }
}

@media (max-width: 480px) {
  .dimensions-input-row,
  .weight-input-row {
    flex-direction: column;
    align-items: stretch;
    gap: var(--space-3);
  }
  
  .dimension-input-compact,
  .weight-input-compact,
  .dimensions-input-row .custom-dropdown,
  .weight-input-row .custom-dropdown {
    width: 100%;
    max-width: 100%; /* Ensure it does not exceed container width */
  }
  
  .dimension-separator {
    display: none;
  }
}

/* ========================================
   ACCESSIBILITY ENHANCEMENTS
   ======================================== */

/* Enhanced focus indicators */
.btn:focus-visible,
.input:focus-visible,
.glassmorphism:focus-visible {
  outline: 3px solid var(--accent);
  outline-offset: 2px;
  box-shadow: 
    var(--shadow-medium),
    0 0 0 3px rgba(214, 223, 32, 0.2);
}

.mode-option:focus-visible,
.location-type-option:focus-visible,
.country-option:focus-visible,
.port-option:focus-visible {
  outline: 3px solid rgba(107, 114, 128, 0.8) !important;
  outline-offset: 2px;
  box-shadow: 
    var(--shadow-medium),
    0 0 0 3px rgba(107, 114, 128, 0.2) !important;
}

/* Keyboard navigation improvements */
.mode-option[tabindex="0"]:focus,
.location-type-option[tabindex="0"]:focus,
.btn-tab:focus,
.radio-label:focus-within {
  outline: 3px solid rgba(107, 114, 128, 0.8) !important;
  outline-offset: 2px;
  z-index: 10;
}

/* Better touch targets for mobile */
@media (max-width: 768px) {
  .btn,
  .input,
  .mode-option,
  .location-type-option {
    min-height: 48px;
    min-width: 48px;
  }
  
  .btn-tab {
    padding: var(--space-4);
    min-height: 48px;
  }
  
  .radio-label {
    padding: var(--space-4);
    min-height: 48px;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .glassmorphism {
    background: rgba(255, 255, 255, 0.95);
    border-color: var(--primary);
    border-width: 2px;
  }
  
  .btn-primary {
    background: var(--accent);
    border: 2px solid var(--primary);
  }
  
  .mode-option,
  .location-type-option {
    border-width: 3px;
    border-color: var(--primary);
  }
  
  .mode-option.selected,
  .location-type-option.selected {
    background: var(--accent);
    border-color: var(--primary);
  }
}

/* Screen reader only text */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Skip links */
.skip-link {
  position: absolute;
  top: -40px;
  left: 6px;
  background: var(--primary);
  color: white;
  padding: 8px;
  border-radius: 4px;
  text-decoration: none;
  z-index: 1000;
  transition: top var(--duration-fast) var(--ease-out-cubic);
}

.skip-link:focus {
  top: 6px;
}

/* Loading states for better UX */
.loading {
  position: relative;
  pointer-events: none;
}

.loading::after {
  content: '';
  position: absolute;
  inset: 0;
  background: rgba(255, 255, 255, 0.8);
  border-radius: inherit;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
}

.loading::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 20px;
  height: 20px;
  border: 2px solid var(--gray-200);
  border-top-color: var(--accent);
  border-radius: 50%;
  animation: spin 1s linear infinite;
  z-index: 11;
}

/* Error states */
.error-state {
  border-color: var(--error) !important;
  background: rgba(239, 68, 68, 0.05);
}

.error-message {
  color: var(--error);
  font-size: 0.875rem;
  margin-top: var(--space-1);
  display: flex;
  align-items: center;
  gap: var(--space-1);
}

.error-message::before {
  content: '⚠️';
  font-size: 0.75rem;
}

/* Success states */
.success-state {
  border-color: var(--success) !important;
  background: rgba(16, 185, 129, 0.05);
}

.success-message {
  color: var(--success);
  font-size: 0.875rem;
  margin-top: var(--space-1);
  display: flex;
  align-items: center;
  gap: var(--space-1);
}

.success-message::before {
  content: '✅';
  font-size: 0.75rem;
}

/* Disabled states */
.disabled,
[disabled] {
  opacity: 0.6;
  cursor: not-allowed;
  pointer-events: none;
  filter: grayscale(50%);
}

/* Tooltip accessibility */
[data-tooltip] {
  position: relative;
}

[data-tooltip]:hover::after,
[data-tooltip]:focus::after {
  content: attr(data-tooltip);
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  background: var(--primary);
  color: white;
  padding: var(--space-2) var(--space-3);
  border-radius: var(--radius-md);
  font-size: 0.875rem;
  white-space: nowrap;
  z-index: 1000;
  margin-bottom: 5px;
}

[data-tooltip]:hover::before,
[data-tooltip]:focus::before {
  content: '';
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  border: 5px solid transparent;
  border-top-color: var(--primary);
  z-index: 1000;
}

/* Progress indicators */
.progress-container {
  width: 100%;
  background: var(--gray-200);
  border-radius: var(--radius-full);
  overflow: hidden;
  height: 8px;
}

.progress-bar {
  height: 100%;
  background: linear-gradient(90deg, var(--accent), var(--accent-light));
  border-radius: inherit;
  transition: width var(--duration-slow) var(--ease-out-cubic);
  position: relative;
}

.progress-bar::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.3), transparent);
  animation: shimmer 2s infinite;
}

/* Form validation enhancements */
.form-control.invalid .input {
  border-color: var(--error);
  background: rgba(239, 68, 68, 0.05);
  animation: shake 0.5s ease-in-out;
}

.form-control.valid .input {
  border-color: var(--success);
  background: rgba(16, 185, 129, 0.05);
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  75% { transform: translateX(5px); }
}

/* Dark mode support (when implemented) */
@media (prefers-color-scheme: dark) {
  :root {
    --surface: rgba(30, 30, 30, 0.9);
    --surface-hover: rgba(40, 40, 40, 0.95);
    --surface-active: rgba(50, 50, 50, 1);
    --border-light: rgba(100, 100, 100, 0.2);
    --border-medium: rgba(100, 100, 100, 0.3);
    --border-strong: rgba(100, 100, 100, 0.4);
  }
  
  .form-title {
    color: white;
  }
  
  .form-subtitle {
    color: var(--gray-300);
  }
}

/* Animation performance optimizations */
.mode-option,
.location-type-option,
.btn,
.input {
  will-change: transform, box-shadow;
}

.mode-option:not(:hover):not(.selected),
.location-type-option:not(:hover):not(.selected),
.btn:not(:hover):not(:active),
.input:not(:focus) {
  will-change: auto;
}

/* ===== INTERNATIONAL INPUT SUPPORT ===== */

/* RTL Language Support (Arabic, Hebrew, etc.) */
.input[lang="ar"],
.input[dir="rtl"],
.search-input[lang="ar"],
.search-input[dir="rtl"] {
  direction: rtl;
  text-align: right;
  unicode-bidi: embed;
}

/* CJK Language Support (Chinese, Japanese, Korean) */
.input[lang="zh"],
.input[lang="ja"],
.input[lang="ko"],
.search-input[lang="zh"],
.search-input[lang="ja"],
.search-input[lang="ko"] {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'PingFang SC', 'Hiragino Sans GB', 'Noto Sans CJK SC', 'Source Han Sans SC', 'Source Han Sans CN', 'Microsoft YaHei', '微软雅黑', sans-serif;
  letter-spacing: 0.025em;
  line-height: 1.6;
}

/* Cyrillic Support (Russian, Bulgarian, etc.) */
.input[lang="ru"],
.input[lang="bg"],
.input[lang="sr"],
.search-input[lang="ru"],
.search-input[lang="bg"],
.search-input[lang="sr"] {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif;
  letter-spacing: 0.01em;
}

/* Turkish and other Latin Extended */
.input[lang="tr"],
.search-input[lang="tr"] {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  letter-spacing: 0.015em;
}

/* Thai Support */
.input[lang="th"],
.search-input[lang="th"] {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Noto Sans Thai', 'Leelawadee UI', sans-serif;
  line-height: 1.8;
}

/* Hindi/Devanagari Support */
.input[lang="hi"],
.search-input[lang="hi"] {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Noto Sans Devanagari', 'Mangal', sans-serif;
  line-height: 1.7;
}

/* Global input method support */
.input,
.search-input {
  /* Enable IME composition for Asian languages */
  ime-mode: auto;
  -webkit-ime-mode: auto;
  /* Better text composition */
  composition-fill-color: rgba(214, 223, 32, 0.1);
  /* Support complex text layout */
  text-rendering: optimizeLegibility;
  -webkit-text-size-adjust: 100%;
  -moz-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

/* Auto-detection for RTL content */
.input:not([dir]):not([lang]) {
  unicode-bidi: plaintext;
}

/* Form container RTL support */
.quote-form-container[dir="rtl"] {
  direction: rtl;
}

.quote-form-container[dir="rtl"] .form-navigation {
  flex-direction: row-reverse;
}

.quote-form-container[dir="rtl"] .input {
  text-align: right;
}

.quote-form-container[dir="rtl"] .search-icon {
  left: auto;
  right: var(--space-4);
}

.quote-form-container[dir="rtl"] .search-input {
  padding-left: var(--space-5);
  padding-right: var(--space-10);
}

/* Textarea support for international languages */
textarea.input {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans CJK SC', 'Noto Sans CJK TC', 'Noto Sans CJK JP', 'Noto Sans CJK KR', 'Noto Sans Arabic', 'Noto Sans Hebrew', 'Noto Sans Thai', 'Noto Sans Devanagari', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  unicode-bidi: plaintext;
  text-rendering: optimizeLegibility;
  word-wrap: break-word;
  overflow-wrap: break-word;
  resize: vertical;
  min-height: 120px;
}

textarea.input[dir="rtl"] {
  direction: rtl;
  text-align: right;
}

/* Auto language detection utility class */
.auto-lang-detect {
  unicode-bidi: plaintext;
  direction: auto;
}

/* Force LTR for specific inputs (like email, URL) */
.force-ltr {
  direction: ltr !important;
  text-align: left !important;
  unicode-bidi: embed !important;
}

/* Support for mixed content (LTR text with RTL words) */
.mixed-content {
  unicode-bidi: isolate;
  direction: auto;
}

/* Number inputs should always be LTR regardless of language */
input[type="number"],
input[type="tel"],
.dimension-input-compact,
.weight-input-compact,
.total-input-compact {
  direction: ltr !important;
  text-align: center;
  unicode-bidi: embed;
}

/* Email and URL inputs should always be LTR */
input[type="email"],
input[type="url"] {
  direction: ltr !important;
  text-align: left !important;
  unicode-bidi: embed !important;
}

/* Amélioration de l'affichage des emojis dans les inputs */
.timing-select input.search-input,
.requirements-select input.search-input,
.currency-select input.search-input {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans CJK SC', 'Noto Sans Arabic', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
  letter-spacing: 0.02em;
  line-height: 1.4;
}

.timing-select input.search-input[value*="📅"],
.timing-select input.search-input[value*="🟢"],
.timing-select input.search-input[value*="❔"],
.requirements-select input.search-input[value*="🟢"],
.requirements-select input.search-input[value*="📦"],
.requirements-select input.search-input[value*="🧊"],
.requirements-select input.search-input[value*="🚀"],
.requirements-select input.search-input[value*="💎"],
.requirements-select input.search-input[value*="➕"],
.currency-select input.search-input[value*="🇺🇸"],
.currency-select input.search-input[value*="🇪🇺"] {
  font-weight: 500;
  padding-left: 1rem;
}

/* ===== PHONE INPUT STYLES ===== */

/* Phone input wrapper */
.phone-input-wrapper {
  display: grid;
  grid-template-columns: 105px 1fr;
  gap: 0.5rem;
}

/* Phone prefix selector - centered text */
.phone-prefix-select .input {
  text-align: center;
  font-weight: var(--font-weight-medium);
  letter-spacing: 0.025em;
  font-size: 0.9rem;
  padding: 0.75rem 0.5rem;
}

/* Main phone number input - centered text */  
input[type="tel"]#phone {
  text-align: center;
  font-weight: var(--font-weight-medium);
  letter-spacing: 0.05em;
  font-size: 1rem;
  /* Support international phone numbers */
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif;
  unicode-bidi: embed;
}

/* General phone input styling */
.phone-input-wrapper .input {
  background: var(--surface);
  border: 1px solid var(--border-light);
  backdrop-filter: var(--surface-blur);
  -webkit-backdrop-filter: var(--surface-blur);
  transition: all var(--duration-normal) var(--ease-out-cubic);
}

.phone-input-wrapper .input:focus {
  border-color: var(--primary);
  background: var(--surface-hover);
  box-shadow: var(--shadow-medium);
  transform: translateY(-1px);
}

.phone-input-wrapper .input:hover {
  border-color: var(--border-medium);
  background: var(--surface-hover);
}



/* ===== LANGUAGE SELECTOR (now using CustomDropdown) ===== */

.language-selector-header {
  display: flex;
  justify-content: center;
  margin: var(--space-4) 0 var(--space-6) 0;
  position: relative;
}

/* Mobile container optimization */
@media (max-width: 480px) {
  .language-selector-header {
    position: relative;
    overflow: visible;
    width: 100%;
  }
  
  .language-selector-header .custom-dropdown {
    position: relative;
    overflow: visible;
  }
}

.language-selector-header .custom-dropdown {
  min-width: 150px;
  max-width: 220px;
}

.language-selector-header .custom-dropdown-trigger {
  text-align: center;
  justify-content: center;
  font-size: 0.9rem;
  font-weight: 600;
  padding: var(--space-4) var(--space-6);
}

/* Layout spécial pour le dropdown des langues - Équilibré et contenu */
.language-selector-header .custom-dropdown-list {
  min-width: 560px;
  width: 560px;
  max-width: 90vw;
  left: 50%;
  transform: translateX(-50%) translateY(-20px) scale(0.95);
  right: auto;
  padding: var(--space-3);
  /* Grid layout toujours appliqué */
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--space-2);
  /* 11 langues en 3 colonnes = 4 lignes compactes */
  overflow: hidden;
  /* État fermé par défaut - non cliquable */
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  /* Transition améliorée pour ouverture/fermeture */
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  /* Position absolue pour éviter les débordements */
  position: absolute;
  top: 100%;
  z-index: 1000;
  /* Contraintes pour empêcher les débordements */
  box-sizing: border-box;
  max-height: 300px;
}

/* Style de scrollbar pour le dropdown des langues */
.language-selector-header .custom-dropdown-list::-webkit-scrollbar {
  width: 6px;
}

.language-selector-header .custom-dropdown-list::-webkit-scrollbar-track {
  background: transparent;
  border-radius: 3px;
}

.language-selector-header .custom-dropdown-list::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 3px;
}

.language-selector-header .custom-dropdown-list::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.3);
}

/* =====================================================
   FORCE MOBILE - SÉLECTEUR DE LANGUE DANS LE CONTENEUR 
   ===================================================== */
@media screen and (max-width: 480px) {
  .language-selector-header .custom-dropdown-list {
    /* Positionnement dans le conteneur parent */
    position: absolute !important;
    left: -20px !important;
    right: -20px !important;
    top: 100% !important;
    min-width: 0 !important;
    width: auto !important;
    max-width: none !important;
    transform: none !important;
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 8px !important;
    padding: 12px !important;
    margin: 0 !important;
    margin-top: 5px !important;
    z-index: 1000 !important;
    /* Empêcher les débordements */
    overflow: hidden !important;
    box-sizing: border-box !important;
    max-height: 280px !important;
  }
  
  .language-selector-header .custom-dropdown-list.show {
    position: absolute !important;
    left: -20px !important;
    right: -20px !important;
    width: auto !important;
    max-width: none !important;
    transform: none !important;
    margin-top: 5px !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
    max-height: 280px !important;
  }
  
  .language-selector-header .custom-dropdown-option {
    min-height: 40px !important;
    padding: 8px !important;
    font-size: 0.8rem !important;
    white-space: normal !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    word-wrap: break-word !important;
    line-height: 1.2 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: flex-start !important;
    box-sizing: border-box !important;
    max-width: 100% !important;
  }
  
  /* Assurer que le conteneur parent peut contenir le dropdown */
  .language-selector-header {
    position: relative !important;
    overflow: visible !important;
  }
}

/* Force ultra pour très petits écrans */
@media screen and (max-width: 360px) {
  .language-selector-header .custom-dropdown-list {
    width: calc(100vw - 20px) !important;
    max-width: calc(100vw - 20px) !important;
    left: 10px !important;
    right: 10px !important;
    padding: 8px !important;
    gap: 6px !important;
  }
  
  .language-selector-header .custom-dropdown-list.show {
    width: calc(100vw - 20px) !important;
    max-width: calc(100vw - 20px) !important;
    left: 10px !important;
    right: 10px !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
    max-height: 250px !important;
  }
  
  .language-selector-header .custom-dropdown-option {
    min-height: 36px !important;
    padding: 6px !important;
    font-size: 0.75rem !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    box-sizing: border-box !important;
    max-width: 100% !important;
  }
}

.language-selector-header .custom-dropdown-list.show {
  animation: fadeInDropdown 0.2s ease-out forwards;
  max-height: 300px;
  overflow-y: auto;
  overflow-x: hidden;
  min-height: fit-content;
  /* Réactiver les interactions quand ouvert */
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
}

/* Mobile dropdown when opened */
@media (max-width: 480px) {
  .language-selector-header .custom-dropdown-list.show {
    position: absolute;
    top: 100%;
    left: 20px;
    right: 20px;
    transform: translateY(0) scale(1);
    z-index: 1000;
  }
}

.language-selector-header .custom-dropdown-list.show-above {
  transform: translateX(-50%) translateY(20px) scale(0.95);
}

.language-selector-header .custom-dropdown-list.show-above.show {
  animation: fadeInDropdownAbove 0.2s ease-out forwards;
}

/* Animation simple pour l'ouverture au-dessus */
@keyframes fadeInDropdownAbove {
  0% {
    opacity: 0;
    transform: translateX(-50%) translateY(10px);
  }
  100% {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

/* Animation de disparition simplifiée */
.language-selector-header .custom-dropdown-list.closing {
  animation: slideOutDropdown 0.2s ease-in forwards;
}

.language-selector-header .custom-dropdown-list.closing.show-above {
  animation: slideOutDropdownAbove 0.2s ease-in forwards;
}

/* Animation personnalisée pour fermeture au-dessus */
@keyframes slideOutDropdownAbove {
  0% {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
  100% {
    opacity: 0;
    transform: translateX(-50%) translateY(15px);
  }
}

/* Les options disparaissent directement avec le dropdown */

/* 
UTILISATION: Pour déclencher l'animation de fermeture :
1. Ajouter la classe 'closing' au dropdown 
2. Attendre 200ms (durée de l'animation)
3. Puis retirer la classe 'show'

Exemple JavaScript:
dropdown.classList.add('closing');
setTimeout(() => {
  dropdown.classList.remove('show', 'closing');
}, 200);
*/

@keyframes fadeOutLanguage {
  from {
    opacity: 1;
    transform: translateY(0);
  }
  to {
    opacity: 0;
    transform: translateY(-10px);
  }
}

/* Animation simple pour l'ouverture */
@keyframes fadeInDropdown {
  0% {
    opacity: 0;
    transform: translateX(-50%) translateY(-10px);
  }
  100% {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

/* Animation fluide pour la fermeture */
@keyframes slideOutDropdown {
  0% {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
  100% {
    opacity: 0;
    transform: translateX(-50%) translateY(-15px);
  }
}

.language-selector-header .custom-dropdown-option {
  margin: 0;
  border-radius: var(--radius-lg);
  border-bottom: none;
  min-height: 44px;
  padding: var(--space-3) var(--space-3);
  display: flex;
  align-items: center;
  justify-content: flex-start;
  /* État initial pour l'animation */
  opacity: 1;
  transform: translateY(0);
  font-size: 0.9rem;
}

/* Animation échelonnée uniquement quand le dropdown des langues s'ouvre */
/* Les options apparaissent directement avec le dropdown */
.language-selector-header .custom-dropdown-option {
  pointer-events: none;
}

.language-selector-header .custom-dropdown-list.show .custom-dropdown-option {
  opacity: 1;
  pointer-events: auto;
}

/* Style spécial pour les flags dans le dropdown des langues */
.language-selector-header .custom-dropdown-option-text {
  font-size: 0.9rem;
  font-weight: 500;
}

/* Pour les très grands écrans - légèrement plus large mais contenu */
@media (min-width: 1200px) {
  .language-selector-header .custom-dropdown-list {
    min-width: 640px;
    width: 640px;
    max-width: 80vw;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--space-2);
  }
  
  .language-selector-header .custom-dropdown-option {
    min-height: 46px;
    padding: var(--space-3) var(--space-4);
    font-size: 0.9rem;
  }
  
  .language-selector-header .custom-dropdown-option-text {
    font-size: 0.9rem;
  }
}

/* Responsive adjustments - OBSOLÈTES remplacées par force brutale ci-dessus */

/* ===== CUSTOM DROPDOWN COMPONENT ===== */

/* Custom dropdown wrapper - harmonisé avec le système glassmorphism */
.custom-dropdown {
  position: relative;
  z-index: 100;
}

.custom-dropdown-trigger {
  width: 100%;
  min-width: 100px;
  padding: var(--space-3) var(--space-4);
  border-radius: var(--radius-xl);
  font-size: 0.9rem;
  font-weight: 500;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  color: var(--primary);
  text-align: left;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-2);
  position: relative;
  overflow: hidden;
  /* Enhanced glassmorphism styling */
  background: linear-gradient(135deg, 
    rgba(255, 255, 255, 0.9), 
    rgba(255, 255, 255, 0.7)
  );
  border: 1px solid rgba(255, 255, 255, 0.4);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  box-shadow: 
    0 4px 12px rgba(0, 28, 56, 0.08),
    0 1px 3px rgba(0, 0, 0, 0.04),
    inset 0 1px 0 rgba(255, 255, 255, 0.7);
  outline: none;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  /* Support international text */
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans CJK SC', 'Noto Sans CJK TC', 'Noto Sans CJK JP', 'Noto Sans CJK KR', 'Noto Sans Arabic', 'Noto Sans Hebrew', 'Noto Sans Thai', 'Noto Sans Devanagari', sans-serif;
  unicode-bidi: embed;
  text-rendering: optimizeLegibility;
}

/* Shimmer effect for trigger */
.custom-dropdown-trigger::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.4),
    transparent
  );
  transition: left 0.6s ease;
  z-index: 1;
  pointer-events: none;
}

.custom-dropdown-trigger:hover::before {
  left: 100%;
}

.custom-dropdown-trigger:hover {
  background: linear-gradient(135deg, 
    rgba(255, 255, 255, 0.95), 
    rgba(255, 255, 255, 0.85)
  );
  border-color: rgba(214, 223, 32, 0.3);
  transform: translateY(-2px) scale(1.01);
  box-shadow: 
    0 8px 24px rgba(0, 28, 56, 0.12),
    0 4px 8px rgba(214, 223, 32, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.8);
}

.custom-dropdown-trigger:focus {
  border-color: var(--accent);
  background: linear-gradient(135deg, 
    rgba(255, 255, 255, 0.98), 
    rgba(255, 255, 255, 0.9)
  );
  box-shadow: 
    0 8px 24px rgba(0, 28, 56, 0.15),
    0 0 0 4px rgba(214, 223, 32, 0.2),
    0 0 0 1px rgba(214, 223, 32, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.9);
  transform: translateY(-2px) scale(1.01);
}

.custom-dropdown-trigger.open {
  border-color: var(--accent);
  background: linear-gradient(135deg, 
    rgba(255, 255, 255, 0.98), 
    rgba(255, 255, 255, 0.9)
  );
  box-shadow: 
    0 8px 24px rgba(0, 28, 56, 0.15),
    0 0 0 4px rgba(214, 223, 32, 0.2),
    0 0 0 1px rgba(214, 223, 32, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.9);
  transform: translateY(-1px);
}

.custom-dropdown-icon {
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  color: var(--gray-500);
  flex-shrink: 0;
  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1));
  z-index: 2;
  position: relative;
}

.custom-dropdown-trigger:hover .custom-dropdown-icon {
  color: var(--gray-700);
  transform: scale(1.1);
}

.custom-dropdown-trigger.open .custom-dropdown-icon {
  transform: rotate(180deg) scale(1.1);
  color: var(--accent);
  filter: drop-shadow(0 2px 4px rgba(214, 223, 32, 0.3));
}

.custom-dropdown-list {
  position: absolute;
  top: calc(100% + var(--space-2));
  left: 0;
  right: 0;
  background: linear-gradient(135deg, 
    rgba(255, 255, 255, 0.98), 
    rgba(255, 255, 255, 0.95)
  );
  border-radius: var(--radius-xl);
  box-shadow: 
    0 12px 40px rgba(0, 28, 56, 0.15),
    0 4px 12px rgba(0, 0, 0, 0.08),
    0 0 0 1px rgba(255, 255, 255, 0.7),
    inset 0 1px 0 rgba(255, 255, 255, 0.9);
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  pointer-events: none;
  transform: translateY(-20px) scale(0.95);
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  z-index: 1000;
  backdrop-filter: blur(24px);
  -webkit-backdrop-filter: blur(24px);
  border: 1px solid rgba(214, 223, 32, 0.1);
  
  /* Contraintes pour ne pas sortir du viewport */
  max-width: 100vw;
  min-width: 120px;
  
  /* Calcul dynamique de la hauteur maximale */
  --available-space-bottom: calc(100vh - var(--dropdown-top, 0px) - 20px);
  --available-space-top: calc(var(--dropdown-top, 0px) - 20px);
  --dropdown-max-height: min(250px, var(--available-space-bottom));
}

/* Variante pour afficher le dropdown au-dessus quand il n'y a pas assez d'espace en bas */
.custom-dropdown-list.show-above {
  top: auto;
  bottom: calc(100% + var(--space-2));
  transform: translateY(20px) scale(0.95);
  --dropdown-max-height: min(250px, var(--available-space-top));
}

.custom-dropdown-list.show-above.show {
  transform: translateY(0) scale(1);
}

.custom-dropdown-list.show {
  max-height: var(--dropdown-max-height);
  opacity: 1;
  pointer-events: auto;
  transform: translateY(0) scale(1);
  overflow-y: auto;
  
  /* Enhanced scroll styling */
  scrollbar-width: thin;
  scrollbar-color: rgba(214, 223, 32, 0.3) transparent;
}

.custom-dropdown-list::-webkit-scrollbar {
  width: 8px;
}

.custom-dropdown-list::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 4px;
  margin: var(--space-2);
}

.custom-dropdown-list::-webkit-scrollbar-thumb {
  background: linear-gradient(135deg, 
    rgba(214, 223, 32, 0.4), 
    rgba(214, 223, 32, 0.6)
  );
  border-radius: 4px;
  border: 1px solid rgba(255, 255, 255, 0.3);
  transition: all 0.2s ease;
}

.custom-dropdown-list::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(135deg, 
    rgba(214, 223, 32, 0.6), 
    rgba(214, 223, 32, 0.8)
  );
  box-shadow: 0 2px 4px rgba(214, 223, 32, 0.2);
}

.custom-dropdown-option {
  display: flex;
  align-items: center;
  padding: var(--space-3) var(--space-4);
  cursor: pointer;
  pointer-events: none;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  border-bottom: 1px solid rgba(0, 28, 56, 0.03);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

.custom-dropdown-option:last-child {
  border-bottom: none;
}

/* Animated background gradient */
.custom-dropdown-option::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, 
    rgba(214, 223, 32, 0.1), 
    rgba(255, 255, 255, 0.2),
    rgba(214, 223, 32, 0.05)
  );
  opacity: 0;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  transform: translateX(-100%);
}

/* Shimmer effect on hover */
.custom-dropdown-option::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, 
    transparent, 
    rgba(255, 255, 255, 0.3), 
    transparent
  );
  transition: left 0.5s ease;
  z-index: 1;
  pointer-events: none;
}

.custom-dropdown-option:hover {
  background: linear-gradient(135deg, 
    rgba(214, 223, 32, 0.12), 
    rgba(255, 255, 255, 0.1)
  );
  transform: translateX(var(--space-1));
  box-shadow: 
    inset 0 1px 0 rgba(255, 255, 255, 0.4),
    0 2px 8px rgba(214, 223, 32, 0.1);
}

.custom-dropdown-option:hover::before {
  opacity: 1;
  transform: translateX(0);
}

.custom-dropdown-option:hover::after {
  left: 100%;
}

.custom-dropdown-option.selected {
  background: linear-gradient(135deg, 
    rgba(214, 223, 32, 0.2), 
    rgba(255, 255, 255, 0.15)
  );
  font-weight: 600;
  color: var(--primary);
  box-shadow: 
    inset 0 1px 0 rgba(255, 255, 255, 0.5),
    0 2px 8px rgba(214, 223, 32, 0.15);
  transform: translateX(var(--space-2));
}

.custom-dropdown-option.selected::before {
  opacity: 1;
  transform: translateX(0);
}

.custom-dropdown-option-text {
  flex: 1;
  font-weight: 500;
  color: var(--primary);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  font-size: 0.9rem;
  z-index: 2;
  position: relative;
  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.5);
}

.custom-dropdown-option:hover .custom-dropdown-option-text {
  transform: translateX(var(--space-1)) scale(1.01);
  color: var(--primary);
  text-shadow: 0 1px 3px rgba(255, 255, 255, 0.7);
}

.custom-dropdown-option.selected .custom-dropdown-option-text {
  font-weight: 600;
  color: var(--primary);
  text-shadow: 0 1px 3px rgba(214, 223, 32, 0.2);
}

/* Enhanced focus indicator */
.custom-dropdown-option:focus {
  outline: none;
  background: linear-gradient(135deg, 
    rgba(214, 223, 32, 0.15), 
    rgba(255, 255, 255, 0.2)
  );
  box-shadow: 
    inset 0 0 0 2px rgba(214, 223, 32, 0.4),
    0 2px 8px rgba(214, 223, 32, 0.2);
  transform: translateX(var(--space-1));
}

/* Variantes compactes pour l'étape 4 */
.custom-dropdown.compact .custom-dropdown-trigger {
  padding: var(--space-2) var(--space-3);
  font-size: 0.85rem;
  min-width: 80px;
  border-radius: var(--radius-lg);
}

.custom-dropdown.compact .custom-dropdown-list {
  --dropdown-max-height: min(200px, var(--available-space-bottom));
  border-radius: var(--radius-lg);
}

.custom-dropdown.compact .custom-dropdown-option {
  padding: var(--space-2) var(--space-3);
  font-size: 0.85rem;
}

.custom-dropdown.compact .custom-dropdown-option-text {
  font-size: 0.85rem;
}

/* Staggered animation for dropdown options */
.custom-dropdown-list.show .custom-dropdown-option {
  animation: slideInDropdown 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  opacity: 0;
  pointer-events: auto;
  transform: translateY(10px);
}

.custom-dropdown-list.show .custom-dropdown-option:nth-child(1) { animation-delay: 0.05s; }
.custom-dropdown-list.show .custom-dropdown-option:nth-child(2) { animation-delay: 0.1s; }
.custom-dropdown-list.show .custom-dropdown-option:nth-child(3) { animation-delay: 0.15s; }
.custom-dropdown-list.show .custom-dropdown-option:nth-child(4) { animation-delay: 0.2s; }
.custom-dropdown-list.show .custom-dropdown-option:nth-child(5) { animation-delay: 0.25s; }
.custom-dropdown-list.show .custom-dropdown-option:nth-child(n+6) { animation-delay: 0.3s; }

@keyframes slideInDropdown {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Styles pour les variantes numériques/unités */
.custom-dropdown.unit-selector .custom-dropdown-trigger {
  text-align: center;
  min-width: 70px;
  justify-content: center;
}

.custom-dropdown.unit-selector .custom-dropdown-option-text {
  text-align: center;
}

/* Assurer que le dropdown reste dans les limites horizontales */
.custom-dropdown {
  position: relative;
  overflow: visible;
}

/* Ajustement automatique si le dropdown dépasse à droite */
.custom-dropdown-list.adjust-right {
  left: auto;
  right: 0;
}

/* Ajustement automatique si le dropdown dépasse à gauche */
.custom-dropdown-list.adjust-left {
  left: 0;
  right: auto;
}

/* Largeur responsable sur mobile */
@media (max-width: 640px) {
  .custom-dropdown-list {
    left: -10px;
    right: -10px;
    max-width: calc(100vw - 20px);
    min-width: auto;
    --dropdown-max-height: min(200px, var(--available-space-bottom));
  }
  
  .custom-dropdown-list.show-above {
    --dropdown-max-height: min(200px, var(--available-space-top));
  }
  
  .custom-dropdown.compact .custom-dropdown-trigger {
    font-size: 0.8rem;
  }
  
  .custom-dropdown.compact .custom-dropdown-option {
    font-size: 0.8rem;
  }
  
  /* Language selector mobile override - SUPPRIMÉ car remplacé par force brutale */
}

/* Animation améliorée pour le repositionnement */
.custom-dropdown-list.repositioning {
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

/* États désactivés */
.custom-dropdown.disabled .custom-dropdown-trigger {
  opacity: 0.6;
  cursor: not-allowed;
  pointer-events: none;
  filter: grayscale(50%);
}

/* Focus states pour l'accessibilité */
.custom-dropdown-trigger:focus-visible {
  outline: 3px solid var(--accent);
  outline-offset: 2px;
  box-shadow: 
    var(--shadow-medium),
    0 0 0 3px rgba(214, 223, 32, 0.2);
}

.custom-dropdown-option:focus {
  background: rgba(214, 223, 32, 0.1);
  outline: none;
}

/* Support pour les langues RTL */
.custom-dropdown-trigger[dir="rtl"] {
  text-align: right;
}

.custom-dropdown-trigger[dir="rtl"] .custom-dropdown-icon {
  order: -1;
}

@media (max-width: 768px) {
  .mode-option {
    flex-direction: column;
    align-items: center;
    text-align: center;
  }

  .mode-option svg {
    margin-bottom: var(--space-2);
  }

  .mode-desc, .mode-additional-info {
    font-size: var(--text-xs);
  }
}

.dimensions-input-row {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  flex-wrap: wrap; /* Allow wrapping on smaller screens */
}

.weight-input-row {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  margin-top: var(--space-2);
}

@media (max-width: 768px) {
  .package-selection-row {
    flex-direction: column;
    gap: var(--space-4);
    align-items: stretch;
  }

  .package-selection-row .units-counter-section {
    width: 100%;
    min-width: 0;
  }

  .package-selection-row .input-number-wrapper-compact {
    width: 100%;
    display: grid;
    grid-template-columns: auto 1fr auto;
  }

  .package-selection-row .input-number-compact {
    width: 100%;
  }
  
  .units-counter-section {
    min-width: auto;
  }
  
  .dimensions-input-row,
  .weight-input-row {
    flex-direction: column;
    align-items: stretch;
    gap: var(--space-3);
  }

  .dimension-separator {
    display: none;
  }
}

.dimension-input-compact {
  flex: 1;
  /* Additional styles for compact dimension inputs */
}